{
    "agenticWorkflowId": "1f82c69b-37e6-48b4-a4c4-62d22b048987",
    "bpc": "20210511",
    "name": "contract-amendment-assistant",
    "displayName": "Contract Amendment Assistant",
    "description": "Latest v10",
    "isDisabled": false,
    "editAs": "canvas",
    "enableForAutoInvoke": false,
    "fromModuleVersion": "v1770330968624601900",
    "lastModifiedVersion": "v1770346099216925400",
    "rebasedFromVersion": null,
    "nodes": [
        {
            "id": "start",
            "type": "start",
            "name": "start",
            "description": "Starting point of the workflow",
            "position": {
                "x": -3193.1224593989746,
                "y": -54.09245839544127
            },
            "deletable": false,
            "selected": false,
            "dragging": false,
            "data": {},
            "properties": {
                "retryOnFailure": false,
                "maxRetries": 6,
                "retryInterval": 541,
                "errorHandling": "none",
                "errorObject": {
                    "body": "",
                    "status_code": 500,
                    "headers": {}
                }
            },
            "config": {
                "label": "start",
                "nodeType": "start"
            },
            "variableUpdates": [
                {
                    "fieldName": "flow.isPvRendered",
                    "operation": "set",
                    "value": false
                },
                {
                    "fieldName": "thread.decision_maker_agent_messages",
                    "operation": "append",
                    "value": "{{nodeOutput.interface.inputs.partialViewData}}",
                    "role": "user",
                    "rules": {
                        "conditions": [
                            {
                                "field": "{{nodeOutput.interface.inputs.partialViewData}}",
                                "operator": "is not empty",
                                "value": ""
                            },
                            {
                                "field": "{{nodeOutput.interface.inputs.partialViewData}}",
                                "operator": "!=",
                                "value": "\"\""
                            },
                            {
                                "field": "{{nodeOutput.interface.inputs.partialViewData}}",
                                "operator": "!=",
                                "value": "\"[]\""
                            }
                        ],
                        "logicType": "OR"
                    }
                },
                {
                    "fieldName": "thread.messages",
                    "operation": "append",
                    "value": "{{nodeOutput.interface.inputs.message}}",
                    "role": "user"
                },
                {
                    "fieldName": "system.userQuery",
                    "operation": "set",
                    "value": "{{nodeOutput.interface.inputs.message}}"
                },
                {
                    "fieldName": "system.attachments",
                    "operation": "extend",
                    "value": "{{nodeOutput.interface.inputs.attachments}}"
                },
                {
                    "fieldName": "thread.decision_maker_agent_messages",
                    "operation": "append",
                    "value": "{{nodeOutput.interface.inputs.message}}",
                    "role": "user"
                }
            ],
            "width": 250,
            "height": 96,
            "positionAbsolute": {
                "x": -3193.1224593989746,
                "y": -56.89529331677184
            }
        },
        {
            "id": "rdzsag9",
            "type": "tool",
            "name": "getcontractbycontractnumber1",
            "description": "Description:\n\n\nReturns:\n- \n\nFriendly Name: Get_Contract_By_Contract_Number",
            "position": {
                "x": -2416.7240912975567,
                "y": 168.33420575361157
            },
            "deletable": true,
            "properties": {
                "retryOnFailure": false,
                "maxRetries": 6,
                "retryInterval": 541,
                "errorHandling": "none",
                "errorObject": {
                    "body": "",
                    "status_code": 500,
                    "headers": {}
                }
            },
            "config": {
                "enabled": true,
                "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913-GetContractByContractNumber-32",
                "type": "mcp",
                "schema": {
                    "type": "object",
                    "properties": {
                        "event": {
                            "description": "Event to execute DAC policy in server function.",
                            "type": "string"
                        },
                        "data": {
                            "description": "Payload used to execute the function."
                        },
                        "additionalData": {
                            "description": "Any additional data used by the function."
                        }
                    },
                    "required": [
                        "data"
                    ],
                    "condition": "Description:\n\n\nReturns:\n- \n\nFriendly Name: Get_Contract_By_Contract_Number"
                },
                "settings": {
                    "serverId": "572ee3d8-dcd5-4957-8a27-4163f488f913"
                },
                "returnDirect": false,
                "_meta": {
                    "functionId": "64ba79d0-e445-42cc-9824-22bdeca4003c",
                    "type": "ssf-call",
                    "source": "current-module",
                    "moduleId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "serverName": "module mcp"
                },
                "parameters": {
                    "event": "\"\"",
                    "data": "{{nodes.decision_maker_agent.toolResults.contract_name_route.data}}",
                    "additionalData": "{}"
                }
            },
            "data": {},
            "width": 350,
            "height": 112,
            "selected": false,
            "positionAbsolute": {
                "x": -2416.7240912975567,
                "y": 168.33420575361157
            },
            "dragging": false,
            "variableUpdates": [
                {
                    "fieldName": "flow.lastSSF",
                    "operation": "set",
                    "value": "getContractByContractNumber"
                },
                {
                    "fieldName": "thread.decision_maker_agent_messages",
                    "operation": "append",
                    "value": "{{nodeOutput.result}}",
                    "role": "tool"
                }
            ]
        },
        {
            "id": "4a61782",
            "type": "tool",
            "name": "q1_getitextmessage",
            "description": "Description:\n\n\nReturns:\n- \n\nFriendly Name: get_iTextMessage",
            "position": {
                "x": -2800.77608017368,
                "y": 1020.5284318925815
            },
            "deletable": true,
            "properties": {
                "retryOnFailure": false,
                "maxRetries": 6,
                "retryInterval": 541,
                "errorHandling": "none",
                "errorObject": {
                    "body": "",
                    "status_code": 500,
                    "headers": {}
                }
            },
            "config": {
                "enabled": true,
                "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913-getiTextMessage-22",
                "type": "mcp",
                "schema": {
                    "type": "object",
                    "properties": {
                        "event": {
                            "description": "Event to execute DAC policy in server function.",
                            "type": "string"
                        },
                        "data": {
                            "description": "Payload used to execute the function."
                        },
                        "additionalData": {
                            "description": "Any additional data used by the function."
                        }
                    },
                    "required": [
                        "data"
                    ],
                    "condition": "Description:\n\n\nReturns:\n- \n\nFriendly Name: get_iTextMessage"
                },
                "settings": {
                    "serverId": "572ee3d8-dcd5-4957-8a27-4163f488f913"
                },
                "returnDirect": false,
                "_meta": {
                    "functionId": "8481170a-c5e4-450a-89a9-f74a2e86f77d",
                    "type": "ssf-call",
                    "source": "current-module",
                    "moduleId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "serverName": "module mcp"
                },
                "parameters": {
                    "event": "",
                    "data": "{{nodes.decision_maker_agent.toolResults.question_1.data}}",
                    "additionalData": "{}"
                }
            },
            "data": {},
            "width": 331,
            "height": 96,
            "selected": false,
            "positionAbsolute": {
                "x": -2800.77608017368,
                "y": 1019.0998251547519
            },
            "dragging": false,
            "variableUpdates": [
                {
                    "fieldName": "thread.decision_maker_agent_messages",
                    "operation": "append",
                    "value": "{{nodeOutput.result}}",
                    "role": "tool"
                }
            ]
        },
        {
            "id": "9wblgkw",
            "type": "tool",
            "name": "q1_labelandbuttonslink",
            "description": "Description:\nlabel_and_buttons_link\n\nOutputs:\n- Returns an object containing:\n  - `RenderingId` (string): The unique identifier of the rendered template. Must be used in final response when referencing this template e.g. [partial_view: RenderingId]\n  - `ContentType` (string): Specifies what type of template this is (e.g. `partial_view`).\n  - `Template` (string): A string representing the UI View Template.\n  - `TemplateDescription` (string): A short description of what the template will present to the user.\n\nNotes:\nlabel_and_buttons_link",
            "position": {
                "x": -2372.2233438419275,
                "y": 1012.5284318925815
            },
            "deletable": true,
            "properties": {
                "retryOnFailure": false,
                "maxRetries": 6,
                "retryInterval": 541,
                "errorHandling": "none",
                "errorObject": {
                    "body": "",
                    "status_code": 500,
                    "headers": {}
                }
            },
            "config": {
                "enabled": true,
                "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913-labelandbuttonslink-96",
                "type": "mcp",
                "schema": {
                    "type": "object",
                    "properties": {
                        "label_datamodel": {
                            "description": "Description:\n\n\nNotes:\n",
                            "type": "string"
                        },
                        "buttons_datamodel": {
                            "description": "Description:\n\n\nNotes:\n",
                            "type": "string"
                        },
                        "infoBannerDetails": {
                            "description": "Description:\n\n\nNotes:\n",
                            "type": "string"
                        }
                    },
                    "condition": "Description:\nlabel_and_buttons_link\n\nOutputs:\n- Returns an object containing:\n  - `RenderingId` (string): The unique identifier of the rendered template. Must be used in final response when referencing this template e.g. [partial_view: RenderingId]\n  - `ContentType` (string): Specifies what type of template this is (e.g. `partial_view`).\n  - `Template` (string): A string representing the UI View Template.\n  - `TemplateDescription` (string): A short description of what the template will present to the user.\n\nNotes:\nlabel_and_buttons_link"
                },
                "settings": {
                    "serverId": "572ee3d8-dcd5-4957-8a27-4163f488f913"
                },
                "returnDirect": false,
                "_meta": {
                    "uiView": "{\"RefId\":null,\"ViewUniqueId\":\"4677dd6a-caa2-4574-b9ad-cd2e97fc01f4\",\"Version\":[0,0],\"Type\":\"partialView\",\"Name\":\"label_and_buttons_link\",\"Icon\":null,\"Channel\":\"conversation\",\"Description\":\"label_and_buttons_link\",\"Instruction\":\"label_and_buttons_link\",\"AppId\":null,\"ModuleId\":null,\"EnableContextSharing\":true,\"Overrides\":{\"label_datamodel\":{\"Type\":\"data\",\"OverrideId\":\"label_datamodel\",\"IsMainDataSource\":null,\"ShareAsContext\":true,\"StoreId\":\"label_datamodel\",\"Description\":\"\",\"Instruction\":\"\",\"Value\":null,\"DataType\":\"string\",\"Source\":\"static\"},\"buttons_datamodel\":{\"Type\":\"data\",\"OverrideId\":\"buttons_datamodel\",\"IsMainDataSource\":null,\"ShareAsContext\":true,\"StoreId\":\"buttons_datamodel\",\"Description\":\"\",\"Instruction\":\"\",\"Value\":null,\"DataType\":\"array\",\"Source\":\"static\"},\"infoBannerDetails\":{\"Type\":\"data\",\"OverrideId\":\"infoBannerDetails\",\"IsMainDataSource\":null,\"ShareAsContext\":true,\"StoreId\":\"infoBannerDetails\",\"Description\":\"\",\"Instruction\":\"\",\"Value\":null,\"DataType\":\"object\",\"Source\":\"static\"}}}",
                    "type": "partial-view",
                    "source": "current-module",
                    "moduleId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "serverName": "module mcp"
                },
                "parameters": {
                    "label_datamodel": "Has the contract amendment been <strong>discussed with the supplier</strong>? If yes, please include a summary of the discussion",
                    "buttons_datamodel": "",
                    "infoBannerDetails": "{{nodes.q1_getitextmessage.result}}"
                }
            },
            "data": {},
            "width": 350,
            "height": 112,
            "selected": false,
            "positionAbsolute": {
                "x": -2372.2233438419275,
                "y": 1014.4034260425278
            },
            "dragging": false,
            "variableUpdates": [
                {
                    "fieldName": "thread.decision_maker_agent_messages",
                    "operation": "append",
                    "value": "\"Question-1 have been asked and waiting for user response\"",
                    "role": "tool"
                }
            ]
        },
        {
            "id": "7rvcw8g",
            "type": "tool",
            "name": "q2_getglobalcode1",
            "description": "Description:\n\n\nReturns:\n- \n\nFriendly Name: Get Global Code",
            "position": {
                "x": -2792.244864008281,
                "y": 1183.5166952948755
            },
            "deletable": true,
            "properties": {
                "retryOnFailure": false,
                "maxRetries": 6,
                "retryInterval": 541,
                "errorHandling": "none",
                "errorObject": {
                    "body": "",
                    "status_code": 500,
                    "headers": {}
                }
            },
            "config": {
                "enabled": true,
                "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913-GetGlobalCode-1",
                "type": "mcp",
                "schema": {
                    "type": "object",
                    "properties": {
                        "event": {
                            "description": "Event to execute DAC policy in server function.",
                            "type": "string"
                        },
                        "data": {
                            "description": "Payload used to execute the function."
                        },
                        "additionalData": {
                            "description": "Any additional data used by the function."
                        }
                    },
                    "required": [
                        "data"
                    ],
                    "condition": "Description:\n\n\nReturns:\n- \n\nFriendly Name: Get Global Code"
                },
                "settings": {
                    "serverId": "572ee3d8-dcd5-4957-8a27-4163f488f913"
                },
                "returnDirect": false,
                "_meta": {
                    "functionId": "bade57a4-cf6a-4437-afc4-457310c40d7a",
                    "type": "ssf-call",
                    "source": "current-module",
                    "moduleId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "serverName": "module mcp"
                },
                "parameters": {
                    "event": "",
                    "data": "{{nodes.decision_maker_agent.toolResults.question_2.data}}",
                    "additionalData": "{}"
                }
            },
            "data": {},
            "width": 326,
            "height": 96,
            "selected": false,
            "positionAbsolute": {
                "x": -2792.244864008281,
                "y": 1181.2311222461942
            },
            "dragging": false,
            "variableUpdates": [
                {
                    "fieldName": "thread.decision_maker_agent_messages",
                    "operation": "append",
                    "value": "{{nodeOutput.result}}",
                    "role": "tool"
                }
            ]
        },
        {
            "id": "yfk8qmz",
            "type": "tool",
            "name": "q4_getitextmessage2",
            "description": "Description:\n\n\nReturns:\n- \n\nFriendly Name: get_iTextMessage",
            "position": {
                "x": -2800.77608017368,
                "y": 1553.5302946966192
            },
            "deletable": true,
            "properties": {
                "retryOnFailure": false,
                "maxRetries": 6,
                "retryInterval": 541,
                "errorHandling": "none",
                "errorObject": {
                    "body": "",
                    "status_code": 500,
                    "headers": {}
                }
            },
            "config": {
                "enabled": true,
                "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913-getiTextMessage-22",
                "type": "mcp",
                "schema": {
                    "type": "object",
                    "properties": {
                        "event": {
                            "description": "Event to execute DAC policy in server function.",
                            "type": "string"
                        },
                        "data": {
                            "description": "Payload used to execute the function."
                        },
                        "additionalData": {
                            "description": "Any additional data used by the function."
                        }
                    },
                    "required": [
                        "data"
                    ],
                    "condition": "Description:\n\n\nReturns:\n- \n\nFriendly Name: get_iTextMessage"
                },
                "settings": {
                    "serverId": "572ee3d8-dcd5-4957-8a27-4163f488f913"
                },
                "returnDirect": false,
                "_meta": {
                    "functionId": "8481170a-c5e4-450a-89a9-f74a2e86f77d",
                    "type": "ssf-call",
                    "source": "current-module",
                    "moduleId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "serverName": "module mcp"
                },
                "parameters": {
                    "event": "",
                    "data": "{{nodes.decision_maker_agent.toolResults.question_4.data}}",
                    "additionalData": "{}"
                }
            },
            "data": {},
            "width": 331,
            "height": 96,
            "selected": false,
            "positionAbsolute": {
                "x": -2800.0405080926694,
                "y": 1553.5302946966192
            },
            "dragging": false,
            "variableUpdates": [
                {
                    "fieldName": "thread.decision_maker_agent_messages",
                    "operation": "append",
                    "value": "{{nodeOutput.result}}",
                    "role": "tool"
                }
            ]
        },
        {
            "id": "gqu7rqp",
            "type": "tool",
            "name": "q4_dummylabelbuttonstest",
            "description": "Description:\n\n\nReturns:\n- \n\nFriendly Name: dummy_label_buttons_test",
            "position": {
                "x": -2340.482353312421,
                "y": 1549.6419629220193
            },
            "deletable": true,
            "properties": {
                "retryOnFailure": false,
                "maxRetries": 6,
                "retryInterval": 541,
                "errorHandling": "none",
                "errorObject": {
                    "body": "",
                    "status_code": 500,
                    "headers": {}
                }
            },
            "config": {
                "enabled": true,
                "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913-dummylabelbuttonstest-2",
                "type": "mcp",
                "schema": {
                    "type": "object",
                    "properties": {
                        "event": {
                            "description": "Event to execute DAC policy in server function.",
                            "type": "string"
                        },
                        "data": {
                            "description": "Payload used to execute the function."
                        },
                        "additionalData": {
                            "description": "Any additional data used by the function."
                        }
                    },
                    "required": [
                        "data"
                    ],
                    "condition": "Description:\n\n\nReturns:\n- \n\nFriendly Name: dummy_label_buttons_test"
                },
                "settings": {
                    "serverId": "572ee3d8-dcd5-4957-8a27-4163f488f913"
                },
                "returnDirect": false,
                "_meta": {
                    "functionId": "45a05b40-9ccf-44a6-bcad-08c03f8df7d7",
                    "type": "ssf-call",
                    "source": "current-module",
                    "moduleId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "serverName": "module mcp"
                },
                "parameters": {
                    "event": "",
                    "data": "{     \"returnInstanceId\": true,     \"buttons\": [       {         \"label\": \"Yes\",         \"value\": \"1\"       },       {         \"label\": \"No\",         \"value\": \"2\"       }     ]   }",
                    "additionalData": "{}"
                }
            },
            "data": {},
            "width": 350,
            "height": 112,
            "selected": false,
            "positionAbsolute": {
                "x": -2340.482353312421,
                "y": 1549.6419629220193
            },
            "dragging": false,
            "variableUpdates": [
                {
                    "fieldName": "thread.decision_maker_agent_messages",
                    "operation": "append",
                    "value": "{{nodeOutput.result}}",
                    "role": "tool"
                }
            ]
        },
        {
            "id": "z8ocd8c",
            "type": "tool",
            "name": "q4_labelandbuttonslink2",
            "description": "Description:\nlabel_and_buttons_link\n\nOutputs:\n- Returns an object containing:\n  - `RenderingId` (string): The unique identifier of the rendered template. Must be used in final response when referencing this template e.g. [partial_view: RenderingId]\n  - `ContentType` (string): Specifies what type of template this is (e.g. `partial_view`).\n  - `Template` (string): A string representing the UI View Template.\n  - `TemplateDescription` (string): A short description of what the template will present to the user.\n\nNotes:\nlabel_and_buttons_link",
            "position": {
                "x": -1904.1158062351944,
                "y": 1549.6419629220193
            },
            "deletable": true,
            "properties": {
                "retryOnFailure": false,
                "maxRetries": 6,
                "retryInterval": 541,
                "errorHandling": "none",
                "errorObject": {
                    "body": "",
                    "status_code": 500,
                    "headers": {}
                }
            },
            "config": {
                "enabled": true,
                "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913-labelandbuttonslink-96",
                "type": "mcp",
                "schema": {
                    "type": "object",
                    "properties": {
                        "label_datamodel": {
                            "description": "Description:\n\n\nNotes:\n",
                            "type": "string"
                        },
                        "buttons_datamodel": {
                            "description": "Description:\n\n\nNotes:\n",
                            "type": "string"
                        },
                        "infoBannerDetails": {
                            "description": "Description:\n\n\nNotes:\n",
                            "type": "string"
                        }
                    },
                    "condition": "Description:\nlabel_and_buttons_link\n\nOutputs:\n- Returns an object containing:\n  - `RenderingId` (string): The unique identifier of the rendered template. Must be used in final response when referencing this template e.g. [partial_view: RenderingId]\n  - `ContentType` (string): Specifies what type of template this is (e.g. `partial_view`).\n  - `Template` (string): A string representing the UI View Template.\n  - `TemplateDescription` (string): A short description of what the template will present to the user.\n\nNotes:\nlabel_and_buttons_link"
                },
                "settings": {
                    "serverId": "572ee3d8-dcd5-4957-8a27-4163f488f913"
                },
                "returnDirect": false,
                "_meta": {
                    "uiView": "{\"RefId\":null,\"ViewUniqueId\":\"4677dd6a-caa2-4574-b9ad-cd2e97fc01f4\",\"Version\":[0,0],\"Type\":\"partialView\",\"Name\":\"label_and_buttons_link\",\"Icon\":null,\"Channel\":\"conversation\",\"Description\":\"label_and_buttons_link\",\"Instruction\":\"label_and_buttons_link\",\"AppId\":null,\"ModuleId\":null,\"EnableContextSharing\":true,\"Overrides\":{\"label_datamodel\":{\"Type\":\"data\",\"OverrideId\":\"label_datamodel\",\"IsMainDataSource\":null,\"ShareAsContext\":true,\"StoreId\":\"label_datamodel\",\"Description\":\"\",\"Instruction\":\"\",\"Value\":null,\"DataType\":\"string\",\"Source\":\"static\"},\"buttons_datamodel\":{\"Type\":\"data\",\"OverrideId\":\"buttons_datamodel\",\"IsMainDataSource\":null,\"ShareAsContext\":true,\"StoreId\":\"buttons_datamodel\",\"Description\":\"\",\"Instruction\":\"\",\"Value\":null,\"DataType\":\"array\",\"Source\":\"static\"},\"infoBannerDetails\":{\"Type\":\"data\",\"OverrideId\":\"infoBannerDetails\",\"IsMainDataSource\":null,\"ShareAsContext\":true,\"StoreId\":\"infoBannerDetails\",\"Description\":\"\",\"Instruction\":\"\",\"Value\":null,\"DataType\":\"object\",\"Source\":\"static\"}}}",
                    "type": "partial-view",
                    "source": "current-module",
                    "moduleId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "serverName": "module mcp"
                },
                "parameters": {
                    "label_datamodel": "Got it. Are there <strong>any changes in the type or volume of data being shared</strong> as part of this contract?",
                    "buttons_datamodel": "{{nodes.q4_dummylabelbuttonstest.result.result}}",
                    "infoBannerDetails": "{{nodes.q4_getitextmessage2.result}}"
                }
            },
            "data": {},
            "width": 350,
            "height": 112,
            "selected": false,
            "positionAbsolute": {
                "x": -1904.1158062351944,
                "y": 1546.4775322210792
            },
            "dragging": false,
            "variableUpdates": [
                {
                    "fieldName": "thread.decision_maker_agent_messages",
                    "operation": "append",
                    "value": "\"Question-4 have been asked and waiting for user response\"",
                    "role": "tool"
                }
            ]
        },
        {
            "id": "kcsr5n2",
            "type": "tool",
            "name": "summary_renderer",
            "description": "Description:\nThis partial view is responsible for rendering the label and buttons/options.\n\nOutputs:\n- Returns an object containing:\n  - `RenderingId` (string): The unique identifier of the rendered template. Must be used in final response when referencing this template e.g. [partial_view: RenderingId]\n  - `ContentType` (string): Specifies what type of template this is (e.g. `partial_view`).\n  - `Template` (string): A string representing the UI View Template.\n  - `TemplateDescription` (string): A short description of what the template will present to the user.\n\nNotes:\nThis partial view is responsible for rendering the label and buttons/options.",
            "position": {
                "x": -2816.244864008281,
                "y": 1946.960740842517
            },
            "deletable": true,
            "properties": {
                "retryOnFailure": false,
                "maxRetries": 6,
                "retryInterval": 541,
                "errorHandling": "none",
                "errorObject": {
                    "body": "",
                    "status_code": 500,
                    "headers": {}
                }
            },
            "config": {
                "enabled": true,
                "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913-labelandbuttons-60",
                "type": "mcp",
                "schema": {
                    "type": "object",
                    "properties": {
                        "label_datamodel": {
                            "description": "Description:\n**If data is not a valid html string then convert the value to string.  **Use `label_datamodel` override to pass data to form label.\n\nNotes:\n**If data is not a valid html string then convert the value to string.  **Use `label_datamodel` override to pass data to form label.",
                            "type": "string"
                        },
                        "buttons_datamodel": {
                            "description": "Description:\n\n\nNotes:\n",
                            "type": "string"
                        }
                    },
                    "condition": "Description:\nThis partial view is responsible for rendering the label and buttons/options.\n\nOutputs:\n- Returns an object containing:\n  - `RenderingId` (string): The unique identifier of the rendered template. Must be used in final response when referencing this template e.g. [partial_view: RenderingId]\n  - `ContentType` (string): Specifies what type of template this is (e.g. `partial_view`).\n  - `Template` (string): A string representing the UI View Template.\n  - `TemplateDescription` (string): A short description of what the template will present to the user.\n\nNotes:\nThis partial view is responsible for rendering the label and buttons/options."
                },
                "settings": {
                    "serverId": "572ee3d8-dcd5-4957-8a27-4163f488f913"
                },
                "returnDirect": false,
                "_meta": {
                    "uiView": "{\"RefId\":null,\"ViewUniqueId\":\"e1a380cd-75d0-4534-ac80-aaa5301718ee\",\"Version\":[1,0],\"Type\":\"partialView\",\"Name\":\"label_and_buttons\",\"Icon\":null,\"Channel\":\"conversation\",\"Description\":\"This partial view is responsible for rendering the label and buttons/options.\",\"Instruction\":\"This partial view is responsible for rendering the label and buttons/options.\",\"AppId\":null,\"ModuleId\":null,\"EnableContextSharing\":true,\"Overrides\":{\"label_datamodel\":{\"Type\":\"data\",\"OverrideId\":\"label_datamodel\",\"IsMainDataSource\":null,\"ShareAsContext\":true,\"StoreId\":\"label_datamodel\",\"Description\":\"**If data is not a valid html string then convert the value to string.  **Use \\u0060label_datamodel\\u0060 override to pass data to form label.\",\"Instruction\":\"**If data is not a valid html string then convert the value to string.  **Use \\u0060label_datamodel\\u0060 override to pass data to form label.\",\"Value\":null,\"DataType\":\"string\",\"Source\":\"static\"},\"buttons_datamodel\":{\"Type\":\"data\",\"OverrideId\":\"buttons_datamodel\",\"IsMainDataSource\":null,\"ShareAsContext\":true,\"StoreId\":\"buttons_datamodel\",\"Description\":\"\",\"Instruction\":\"\",\"Value\":null,\"DataType\":\"array\",\"Source\":\"static\"}}}",
                    "type": "partial-view",
                    "source": "current-module",
                    "moduleId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "serverName": "module mcp"
                },
                "parameters": {
                    "label_datamodel": "{{nodes.decision_maker_agent.toolResults.summary_node.label_datamodel}} ",
                    "buttons_datamodel": "[{           \"label\": \"Create Request\",           \"value\": \"Create Request\"         }]  "
                }
            },
            "data": {},
            "width": 350,
            "height": 112,
            "selected": false,
            "positionAbsolute": {
                "x": -2814.54418071215,
                "y": 1946.960740842517
            },
            "dragging": false,
            "variableUpdates": [
                {
                    "fieldName": "thread.decision_maker_agent_messages",
                    "operation": "append",
                    "value": "\"Summary has been provided and waiting for user confirmation\"",
                    "role": "tool"
                }
            ]
        },
        {
            "id": "f8b0xl2",
            "type": "tool",
            "name": "projectrequesttool1",
            "description": "Description:\n\n\nReturns:\n- \n\nFriendly Name: Project_Request_Tool",
            "position": {
                "x": -2811.9684131844924,
                "y": 2182.710789136452
            },
            "deletable": true,
            "properties": {
                "retryOnFailure": false,
                "maxRetries": 6,
                "retryInterval": 541,
                "errorHandling": "none",
                "errorObject": {
                    "body": "",
                    "status_code": 500,
                    "headers": {}
                }
            },
            "config": {
                "enabled": true,
                "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913-ProjectRequestTool-29",
                "type": "mcp",
                "schema": {
                    "type": "object",
                    "properties": {
                        "event": {
                            "description": "Event to execute DAC policy in server function.",
                            "type": "string"
                        },
                        "data": {
                            "description": "Payload used to execute the function."
                        },
                        "additionalData": {
                            "description": "Any additional data used by the function."
                        }
                    },
                    "required": [
                        "data"
                    ],
                    "condition": "Description:\n\n\nReturns:\n- \n\nFriendly Name: Project_Request_Tool"
                },
                "settings": {
                    "serverId": "572ee3d8-dcd5-4957-8a27-4163f488f913"
                },
                "returnDirect": false,
                "_meta": {
                    "functionId": "05afc7e4-3c57-47d1-ba51-44633c06abbb",
                    "type": "ssf-call",
                    "source": "current-module",
                    "moduleId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "serverName": "module mcp"
                },
                "parameters": {
                    "event": "CREATE REQUEST",
                    "data": "{{nodes.decision_maker_agent.toolResults.project_request_node.data}}",
                    "additionalData": "{}"
                }
            },
            "data": {},
            "width": 350,
            "height": 96,
            "selected": false,
            "positionAbsolute": {
                "x": -2811.9684131844924,
                "y": 2182.710789136452
            },
            "dragging": false,
            "variableUpdates": [
                {
                    "fieldName": "thread.decision_maker_agent_messages",
                    "operation": "append",
                    "value": "{{nodeOutput.result}}",
                    "role": "tool"
                }
            ]
        },
        {
            "id": "x6miusi",
            "type": "tool",
            "name": "prfcreaterequestformpv1",
            "description": "Description:\nCreate Project Request\n\nOutputs:\n- Returns an object containing:\n  - `RenderingId` (string): The unique identifier of the rendered template. Must be used in final response when referencing this template e.g. [partial_view: RenderingId]\n  - `ContentType` (string): Specifies what type of template this is (e.g. `partial_view`).\n  - `Template` (string): A string representing the UI View Template.\n  - `TemplateDescription` (string): A short description of what the template will present to the user.\n\nNotes:\nsave value of generated overrides 'projectRequestOverrides' to ${sendForValidationPV}",
            "position": {
                "x": -2361.1403565788537,
                "y": 2174.710789136452
            },
            "deletable": true,
            "properties": {
                "retryOnFailure": false,
                "maxRetries": 6,
                "retryInterval": 541,
                "errorHandling": "none",
                "errorObject": {
                    "body": "",
                    "status_code": 500,
                    "headers": {}
                }
            },
            "config": {
                "enabled": true,
                "toolId": "mcp-62e995f8-9aed-4aab-9621-45c817019856-prfcreateRequestFormpv",
                "type": "mcp",
                "schema": {
                    "type": "object",
                    "properties": {
                        "projectRequestOverrides": {
                            "description": "Description:\nThe value of this override can be user specific like ```json {\"documentCode\":\"&lt;documentCode&gt;\"}```\n\nNotes:\nThe value of this override can be user specific like ```json {\"documentCode\":\"&lt;documentCode&gt;\"}```",
                            "type": "string"
                        }
                    },
                    "condition": "Description:\nCreate Project Request\n\nOutputs:\n- Returns an object containing:\n  - `RenderingId` (string): The unique identifier of the rendered template. Must be used in final response when referencing this template e.g. [partial_view: RenderingId]\n  - `ContentType` (string): Specifies what type of template this is (e.g. `partial_view`).\n  - `Template` (string): A string representing the UI View Template.\n  - `TemplateDescription` (string): A short description of what the template will present to the user.\n\nNotes:\nsave value of generated overrides 'projectRequestOverrides' to ${sendForValidationPV}"
                },
                "settings": {
                    "serverId": "62e995f8-9aed-4aab-9621-45c817019856"
                },
                "returnDirect": false,
                "_meta": {
                    "uiView": "{\"RefId\":null,\"ViewUniqueId\":\"d2801162-5faa-4e94-a6ed-39b9b4e3453a\",\"Version\":[0,0],\"Type\":\"partialSection\",\"Name\":\"prf_createRequestForm_pv\",\"Icon\":null,\"Channel\":\"conversation\",\"Description\":\"Create Project Request\",\"Instruction\":\"save value of generated overrides \\u0027projectRequestOverrides\\u0027 to ${sendForValidationPV}\",\"AppId\":null,\"ModuleId\":null,\"EnableContextSharing\":true,\"Overrides\":{\"projectRequestOverrides\":{\"Type\":\"data\",\"OverrideId\":\"projectRequestOverrides\",\"IsMainDataSource\":null,\"ShareAsContext\":true,\"StoreId\":\"projectRequestDM\",\"Description\":\"The value of this override can be user specific like \\u0060\\u0060\\u0060json {\\u0022documentCode\\u0022:\\u0022\\u0026lt;documentCode\\u0026gt;\\u0022}\\u0060\\u0060\\u0060\",\"Instruction\":\"The value of this override can be user specific like \\u0060\\u0060\\u0060json {\\u0022documentCode\\u0022:\\u0022\\u0026lt;documentCode\\u0026gt;\\u0022}\\u0060\\u0060\\u0060\",\"Value\":null,\"DataType\":\"object\",\"Source\":\"static\"}}}",
                    "type": "partial-view"
                },
                "parameters": {
                    "projectRequestOverrides": "{{nodes.projectrequesttool1.result}}"
                }
            },
            "data": {},
            "width": 350,
            "height": 112,
            "selected": false,
            "positionAbsolute": {
                "x": -2361.1403565788537,
                "y": 2173.628049038186
            },
            "dragging": false,
            "variableUpdates": [
                {
                    "fieldName": "thread.decision_maker_agent_messages",
                    "operation": "append",
                    "value": "\"Project Request has been created\"",
                    "role": "tool"
                }
            ]
        },
        {
            "id": "5ee933r",
            "type": "agent",
            "name": "decision_maker_agent",
            "description": "Takes decision for supplier route or directly start from contract details",
            "position": {
                "x": -2571.9612279136686,
                "y": -119.09245839544127
            },
            "deletable": true,
            "properties": {
                "retryOnFailure": false,
                "maxRetries": 6,
                "retryInterval": 541,
                "errorHandling": "none",
                "errorObject": {
                    "body": "",
                    "status_code": 500,
                    "headers": {}
                }
            },
            "config": {
                "agentStrategy": "react",
                "model": {
                    "code": "gpt-5.2",
                    "name": "OpenAI GPT-5.2",
                    "temperature": 0.1,
                    "topP": 0.1
                },
                "promptTemplate": [
                    {
                        "id": "b24234db-a15c-4ec8-b872-722b920f7764",
                        "role": "system",
                        "text": "# Contract Amendment Supervisor\n\n## PRIORITY OVERRIDE: CONVERSATIONAL HANDLING & NAVIGATION\n\n**This section has HIGHEST priority and OVERRIDES all routing rules below.**\n\n### 1) OFF-TOPIC & META-QUESTIONS (NO TOOLS)\n\n**What you can do:**\n\"I can guide you through every step of the contract amendment process, from identifying the contract to gathering all required amendment details and submitting your request for processing.\"\n\n**Who built you:**\n\"I'm an AI agent built by GEP to help streamline contract amendments and project request creation.\"\n\n**Irrelevant queries** (weather, jokes, unrelated commands):\n\"That seems unrelated to amending a contract. I'm here to help you with contract amendment requests. Shall we continue?\"\n\n**Out-of-scope features** (open email, schedule meetings, etc.):\n\"That seems unrelated to amending a contract. I'm here to help you with contract amendment requests. Shall we continue?\"\n\n**For all above:** Do NOT call any tool. STOP after responding.\n\n---\n\n### 2) INTENT-ONLY REQUEST (NO TOOLS)\n\n**IF** user expresses intent to amend BUT provides NO identifier:\n- No contract number\n- No supplier ID (PC-XXXX.XXXXXX)\n- No supplier name\n\n**THEN respond:**\n\"Sure—please share the contract number or the supplier name/ID (PC-XXXX.XXXXXX).\"\n\nDo NOT call any tool. STOP.\n\n---\n\n### 3) USER NAVIGATION / BACKTRACK / RE-RENDER\n\n**IF** user wants to redo/go back/change selection:\nExamples: \"I selected wrong\", \"wrong supplier\", \"show the previous step\", \"go back\", \"edit my answer\", \"can I pick again\"\n\n#### A) User EXPLICITLY mentions what to change → Re-render that step\n\n| User mentions | Action |\n|---------------|--------|\n| supplier / supplier list / wrong supplier | Call `get_contracts_by_using_supplier_name` with most recent supplier name/ID from conversation. If not recoverable, ask: \"Please share the supplier name or supplier ID (PC-XXXX.XXXXXX).\" |\n| contract / contract number / wrong contract | Call `contract_name_route` if contract number available in history. Else ask: \"Please share the contract number you want to amend.\" |\n| question 1 / discussion / supplier discussion | Call `question_1` |\n| question 2 / reason / amendment reason | Call `question_2` |\n| question 3 / description / amendment description | Call `question_3` |\n| question 4 / time sensitivity / urgency | Call `question_4` |\n| question 5 / products / services | Call `question_5` |\n| summary | Call `summary_node` |\n\nAfter the tool renders, STOP.\n\n#### B) User says \"go back\" / \"previous step\" WITHOUT specifying what → Re-render LAST completed step\n\n- Identify the most recent completed step from conversation history\n- Re-call the same tool for that step\n- This is an explicit user request to re-render — proceed even if data exists\n- STOP after tool call\n\nIf unclear, ask:\n\"Which part do you want to change: supplier/contract, question 1-5, or summary?\"\nSTOP.\n\n---\n\n### 4) AGENTIC BEHAVIOR PRINCIPLES\n\n- Maintain a **friendly, efficient, professional** tone\n- Keep conversation moving toward successful project request creation\n- If no contracts found, ask for different supplier or contract number (don't mention internal status details)\n- Never display internal data, JSON, or technical information to users\n- Confirm ambiguous supplier/contract details instead of assuming\n- If user doesn't select a contract but says \"extend/amend the contract\", ask them to select from the list\n- **If user provides information for upcoming steps upfront, skip those questions**\n  - Example: \"I want to amend contract CTR-1234 for cost reduction\" → skip Q2 (Reason)\n- If search returns \"no contract found\" / \"supplier doesn't exist\", respond: \"We couldn't find any matching contracts with this supplier. Please provide a different supplier name or contract number.\"\n- Once project request is submitted and user asks follow-up questions, inform: \"Your request is already submitted. Please start a new chat for a new request.\"\n\n---\n\n## ROLE DEFINITION\n\nYou are a **SUPERVISOR ROUTER** for the Contract Amendment Assistant workflow.\n\n**Core Responsibilities:**\n- Analyze user messages for intent and extract required information\n- Validate data completeness before routing\n- Route to exactly **ONE tool per turn**\n- Support non-linear navigation (users can modify previous responses)\n- **Preserve and reuse valid data** — never re-ask for information already collected unless it's affected by a change\n\n**Prohibited Actions:**\n- Generate summaries, confirmations, UI text, or progress updates (tools handle this)\n- Modify or interpret tool outputs\n- Chain multiple tool calls\n- Re-ask for valid, unaffected data after user corrections\n- Display internal data, JSON, or technical details to users\n\n---\n\n## WORKFLOW SEQUENCE\n\n1. **Contract Identification** → Identify contract by number, supplier name, or supplier ID\n2. **Question Flow** → Five mandatory questions about the amendment\n3. **Summary Review** → Present collected data for user confirmation\n4. **Project Request** → Create request upon user confirmation\n5. **Validation** → Final confirmation after validation\n\n**Key Principle:** Users can navigate back to modify any step. When they do, **only invalidate and re-collect data that depends on the change**. Always reuse unaffected valid data.\n\n---\n\n## INTENT RECOGNITION\n\nDetect when users want to:\n\n**1. Change Previous Data**\n- Phrases: \"change\", \"modify\", \"update\", \"wrong\", \"actually\", \"go back\"\n- Action: Route to the affected step, then re-ask only dependent downstream questions\n\n**2. Start Over**\n- Phrases: \"start fresh\", \"begin again\", \"reset\", \"new contract\"\n- Action: Clear all data, return to Step 1\n\n**3. Batch Input**\n- User provides multiple answers at once\n- Action: Extract and store all provided answers, then process sequentially (one tool per turn)\n- **Skip questions already answered in the batch input**\n\n**Priority Order:**\n1. Change/modification requests (highest priority)\n2. Contract changes → restart dependent questions only\n3. Question changes → re-ask dependent questions only\n4. Forward progression (default)\n\n---\n\n## STEP 1: CONTRACT IDENTIFICATION\n\n### 1A: Direct Contract Number\n**Trigger:** User provides contract number only (not full details)\n**Tool:** `contract_name_route`\n**Data:** `{\"contractNumber\": \"<number>\"}`\n**Change Impact:** If changed after questions, invalidate all question responses\n\n### 1B: Supplier Name or ID Search\n**Trigger:** User mentions supplier name OR supplier ID (format: PC-XXXX.XXXXXX)\n**Tool:** `get_contracts_by_using_supplier_name`\n**Data:** `{\"data\": {\"supplierName\": \"<name>\", \"supplierIdentificationNumber\": \"<id>\", \"status\": [\"Live\"], \"excludePerpetual\": true}}`\n**Change Impact:** If changed after supplier selection, reset to supplier selection\n\n### 1C: Supplier Selection from Grid\n**Trigger:** Message starts with \"Proceed :\" (indicates grid selection)\n**Tool:** `get_contracts_for_selected_supplier`\n**Data:** `{\"data\": {\"supplierSourceIdentificationNo\": \"<from_partialViewData>\", \"supplierName\": \"<name>\", \"status\": [\"Live\"]}}`\n**Validation:** `partialViewData` must contain valid supplier JSON\n\n### 1D: Contract Selection from Grid\n**Trigger:** User selects contract from grid (explicit selection required)\n**Action:** Proceed to Question Flow\n**Change Impact:** If changed, restart from Q1\n**Important:** If user says \"amend the contract\" without selecting, ask: \"Please select which contract you'd like to amend from the list.\"\n\n### Change Handling\nWhen contract is changed mid-flow:\n1. Route to appropriate contract identification tool\n2. Invalidate only contract-dependent question responses\n3. **Retain** valid, unaffected data (e.g., supplier context if still applicable)\n4. Inform user which questions will be re-asked\n\n### Error Handling\n**If no contracts found:**\n- Respond: \"We couldn't find any matching contracts with this supplier. Please provide a different supplier name or contract number.\"\n- Do NOT mention internal status details or system information\n\n---\n\n## STEP 2: QUESTION FLOW\n\nAsk five questions sequentially, **one per turn** (unless batch input provided):\n\n| Question | Tool | Purpose | Dependency Impact |\n|----------|------|---------|-------------------|\n| **Q1** | `question_1` | Discussion with supplier | Low — rarely affects others |\n| **Q2** | `question_2` | Reason for amendment | Medium — may affect Q3 |\n| **Q3** | `question_3` | Amendment description | High — may affect Q4, Q5 |\n| **Q4** | `question_4` | Time sensitivity | Low — rarely affects Q5 |\n| **Q5** | `question_5` | Products/services change | None — last question |\n\n### Question Rules\n- **Sequential by default** — ask one at a time\n- **Batch processing supported** — if user provides multiple answers upfront, extract and store them\n  - Example: \"I want to amend CTR-1234 for cost reduction to lower monthly fees by $500\"\n    - Store: Contract = CTR-1234, Reason (Q2) = cost reduction, partial Description (Q3) = lower monthly fees\n    - Process: Route to contract identification, then Q1, then Q2 (skip, already provided), then Q3 (ask for complete details), etc.\n- **Skip questions with batch-provided answers** — if user already answered a question in their initial message, don't ask it again\n- **Modification allowed** — users can change any answer\n- **Dependency-aware** — when a question changes, re-ask only affected downstream questions\n- **Validation required** — never proceed with incomplete/ambiguous answers\n- **Reuse valid data** — don't re-ask questions with valid, unaffected answers\n\n### Change Handling\nWhen user modifies a question:\n1. Route to that question's tool with new answer\n2. Evaluate dependencies:\n   - Q1 changed → usually no re-asking needed\n   - Q2 changed → re-ask Q3 if description depends on reason\n   - Q3 changed → re-ask Q4, Q5 if they depend on description\n   - Q4 changed → usually no re-asking needed\n   - Q5 changed → no downstream questions\n3. **Skip re-asking** for questions whose answers remain valid\n\n---\n\n## STEP 3: SUMMARY REVIEW\n\n**Trigger:** All five questions answered (or explicitly skipped)\n**Tool:** `summary_node`\n**Purpose:** Display collected data for user review\n\n### Change Handling\nIf user requests changes during summary:\n1. Identify what needs to change (contract, specific question, etc.)\n2. Route to appropriate tool\n3. Update only affected data\n4. Return to summary with updated information\n5. **Preserve** all unaffected data\n\n**Note:** Supervisor does not generate or format the summary — tool handles this.\n\n---\n\n## STEP 4: PROJECT REQUEST CREATION\n\n**Trigger:** User confirms summary (e.g., \"Confirm\", \"Create Request\", button click)\n**Tool:** `create_project_request`\n**Validation:** If data object is empty (`{\"data\": {}}`), **do not submit**. Inform user and request necessary data.\n\n### Change Handling\nChanges allowed until validation (Step 5):\n1. Route back to affected step\n2. Update data\n3. Return through summary\n4. Recreate project request\n\n---\n\n## STEP 5: VALIDATION\n\n**Trigger:** User initiates validation (\"Send For Validation\" or button click)\n**Tool:** `send_for_validation_handoff` → `complete_step`\n**Final State:** Flow complete, display success message\n\n**Post-Validation:** \n- Changes not allowed\n- If user asks follow-up questions after submission: \"Your request is already submitted. Please start a new chat for a new request.\"\n\n---\n\n## DATA VALIDATION & ERROR HANDLING\n\n### Missing/Incomplete Data\n- Identify specific missing information\n- Ask clear, specific question\n- **Confirm ambiguous details instead of assuming**\n- **Do not route** until data is complete\n- Example: \"I need the contract number to proceed. Please provide it.\"\n\n### Ambiguous Input\n- Request clarification with context\n- Never guess or assume\n- Example: \"Are you changing the contract or modifying question 2?\"\n\n### Invalid Format\n- Explain expected format\n- Request correct format\n- Example: \"Contract number format: XXX-XXXX. Please provide a valid number.\"\n\n### Tool Errors\nRespond with clear, user-friendly messages (no internal details):\n\n**Contract not found/invalid:**\n- \"We couldn't find any matching contracts with this supplier. Please provide a different supplier name or contract number.\"\n\n**Supplier not found:**\n- \"We couldn't find any matching contracts with this supplier. Please provide a different supplier name or contract number.\"\n\n**No data found:**\n- \"No contract found for the selected supplier. Please verify details and try again.\"\n\n**Critical:** Do not proceed until valid data is provided. Do not mention \"Live status\" or other internal system details.\n\n---\n\n## EXECUTION PRINCIPLES\n\n### One Tool Per Turn\n1. Analyze user intent\n2. Validate required data is present\n3. Route to appropriate tool\n4. **Stop** — wait for next user message\n\n### Data Preservation & Batch Intelligence\n- Track previously collected valid information\n- **Extract batch-provided answers from initial user messages**\n- When changes occur, identify what's affected vs. unaffected\n- **Reuse unaffected data** — never re-ask unnecessarily\n- **Skip questions already answered in batch input**\n- Only request missing/ambiguous/affected information\n\n### Intent-Driven Navigation\n- Prioritize change requests over forward progression\n- Support back navigation without data loss\n- Allow modifications at any stage (until validation)\n- Handle explicit backtracking requests (see Priority Override section)\n\n### Professional Communication\n- Maintain friendly, efficient, professional tone\n- Keep conversation moving forward\n- Never display JSON, internal data, or technical details\n- Confirm ambiguous inputs instead of assuming\n- If user doesn't select from grid: \"Please select which contract you'd like to amend from the list.\"\n\n---\n\n## NAVIGATION PATTERNS\n\n### Pattern 1: Linear Progression (Default)\nUser follows standard flow without changes:\n- Contract ID → Q1-Q5 → Summary → Create → Validate\n\n### Pattern 2: Change Contract Mid-Flow\nUser changes contract after answering questions:\n1. Route to contract identification\n2. Invalidate contract-dependent responses\n3. **Retain** unaffected data (e.g., supplier context)\n4. Restart from Q1 for dependent questions\n5. Inform user which questions will be re-asked\n\n### Pattern 3: Modify Question Answer\nUser changes a previous question:\n1. Route to that question tool\n2. Re-ask only dependent downstream questions\n3. **Skip** questions with valid, unaffected answers\n4. Continue from appropriate point\n\n### Pattern 4: Change During Summary\nUser reviews summary and requests changes:\n1. Route to affected step/question\n2. Update only affected data\n3. **Preserve** unaffected data\n4. Return to summary with updates\n\n### Pattern 5: Batch Input\nUser provides multiple answers upfront:\n1. Extract all provided answers\n2. Route to contract identification first\n3. Process questions sequentially (one tool per turn)\n4. **Skip questions with batch-provided answers**\n5. Ask only for missing/incomplete information\n6. Proceed to summary when complete\n\n**Example:**\nUser: \"I want to amend CTR-1234 for cost reduction to lower monthly fees by $500\"\n- Extract: Contract=CTR-1234, Q2=cost reduction, Q3 (partial)=lower monthly fees\n- Turn 1: `contract_name_route` → CTR-1234\n- Turn 2: `question_1` → Ask about supplier discussion\n- Turn 3: Skip Q2 (already provided: \"cost reduction\")\n- Turn 4: `question_3` → Ask for complete description (user provided partial info)\n- Turn 5: `question_4` → Ask about time sensitivity\n- Turn 6: `question_5` → Ask about products/services\n\n### Pattern 6: Explicit Backtrack (see Priority Override)\nUser explicitly requests to go back:\n1. Identify last completed step or user-specified step\n2. Re-render that step (call appropriate tool)\n3. Allow user to make changes\n4. Continue from that point\n\n---\n\n## ROUTING DECISION CHECKLIST\n\nFor every user message:\n\n1. ✓ **Check Priority Override** — Off-topic? Meta-question? Backtrack request?\n2. ✓ **Analyze intent** — Change? Forward? Clarification needed?\n3. ✓ **Extract batch data** — Did user provide multiple answers upfront?\n4. ✓ **Recognize modifications** — What's being changed?\n5. ✓ **Validate data** — Is required info present and clear?\n6. ✓ **Identify dependencies** — What downstream steps are affected?\n7. ✓ **Preserve valid data** — What can be reused? What was batch-provided?\n8. ✓ **Route to tool** — Select appropriate tool\n9. ✓ **Stop** — End turn, wait for next message\n\nIf unclear or incomplete:\n1. ✓ **Request clarification** — Be specific about what's needed\n2. ✓ **Do not route** — Wait for user response\n3. ✓ **Explain** — Provide context for request\n\n---\n\n## CORE GUARANTEES\n\n✓ **Single tool per turn** — No chaining\n✓ **Data validation** — All inputs validated before routing\n✓ **Non-linear navigation** — Users can modify any previous step\n✓ **Data preservation** — Reuse valid, unaffected data\n✓ **Batch intelligence** — Extract and skip already-answered questions\n✓ **Intent recognition** — Understand change requests\n✓ **Dependency awareness** — Smart re-asking only when needed\n✓ **User control** — Users drive the flow\n✓ **Professional tone** — Friendly, efficient, on-topic\n✓ **Focus** — Contract amendments only\n✓ **Efficiency** — Minimize unnecessary re-asking\n\n---\n\n## SUMMARY\n\nThis supervisor is a **smart router** that:\n- Routes to one tool per turn based on user intent and workflow state\n- Supports both linear and non-linear navigation\n- Preserves valid data across modifications\n- Intelligently handles batch inputs and skips redundant questions\n- Re-asks only dependent, affected questions\n- Validates all data before proceeding\n- Handles errors with clear, user-friendly messages\n- Maintains friendly, professional conversation tone\n- Maintains strict focus on contract amendment workflows\n- Never displays internal system details to users\n\n**Philosophy:** Maximize efficiency by reusing valid data, intelligently processing batch inputs, and maintaining flexibility for user corrections and changes while keeping the conversation professional and on-topic."
                    }
                ],
                "tools": [
                    {
                        "_id": "b10fcae7-e918-4f2a-ac86-75f684d27640",
                        "name": "send_for_validation_handoff",
                        "description": "\"Invoke when user clicks 'Send For Validation' after Step 5 PRF is rendered. This displays the success confirmation PV.\",",
                        "type": "tool",
                        "config": {
                            "enabled": true,
                            "toolId": "tool-handoff",
                            "type": "handoff",
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "sendForValidationOverrides": {
                                        "type": "string",
                                        "description": "Override data from the project request - use flow.pvresponse or nodes.prfcreaterequestformpv.result"
                                    }
                                },
                                "required": [],
                                "additionalProperties": false
                            },
                            "settings": {
                                "nodeId": "ngh8kxf"
                            },
                            "returnDirect": false,
                            "parameters": {}
                        }
                    },
                    {
                        "_id": "b47f72b3-4de4-4285-b6fe-1081a894ceb4",
                        "name": "supplier_name_route_partb",
                        "description": "Use this tool when:\n1. User selects a supplier from the supplier grid (multiple suppliers scenario)\n2. User directly provides a supplier identification number (format: PC-XXXX.XXXXXX)\n\nExamples:\n- \"I want to amend contract with supplier PC-2025.003552\" → Use this tool\n- \"amend contract for PC-2024.001234\" → Use this tool\n\nSupplier IDs start with PC- followed by digits and dots.\n\nDO NOT use for contract numbers like CDR0027626 (use contract_name_route instead).\nDO NOT use for supplier names like \"Acme Corp\" (use supplier_name_route instead).\n\nPayload:\n{\n  \"data\": {\n    \"supplierSourceIdentificationNo\": \"<sourceIdentificationNo>\",\n    \"supplierName\": \"<legalCompanyName>\",\n    \"partnerCode\": \"<partnerCode>\",\n    \"partnerStatus\": \"<partnerStatus>\",\n    \"onboardingStatus\": \"<onboardingStatus>\",\n    \"status\": [\"Live\"]\n  }\n}",
                        "type": "tool",
                        "config": {
                            "enabled": true,
                            "toolId": "tool-handoff",
                            "type": "handoff",
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "data": {
                                        "type": "object",
                                        "properties": {
                                            "supplierSourceIdentificationNo": {
                                                "type": "string",
                                                "description": "The selected supplier's source identification number"
                                            },
                                            "supplierName": {
                                                "type": "string",
                                                "description": "The selected supplier's name"
                                            },
                                            "partnerCode": {
                                                "type": "string",
                                                "description": "Unique partner code associated with the supplier"
                                            },
                                            "partnerStatus": {
                                                "type": "string",
                                                "description": "Current status of the partner"
                                            },
                                            "onboardingStatus": {
                                                "type": "string",
                                                "description": "Current onboarding status of the supplier"
                                            },
                                            "status": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                },
                                                "description": "Contract status filter. Always use [\"Live\"]"
                                            }
                                        },
                                        "required": [
                                            "supplierSourceIdentificationNo",
                                            "partnerCode",
                                            "partnerStatus",
                                            "onboardingStatus",
                                            "status"
                                        ],
                                        "additionalProperties": false
                                    }
                                },
                                "required": [
                                    "data"
                                ],
                                "additionalProperties": false
                            },
                            "settings": {
                                "nodeId": "6yaq8og"
                            },
                            "returnDirect": false,
                            "parameters": {}
                        }
                    },
                    {
                        "_id": "46094187-4153-4e59-8816-60ad367bba4a",
                        "name": "contract_name_route",
                        "description": "Use this tool ONLY for contract numbers (format: CDRxxxxxx).\n\nExamples:\n- \"amend contract CDR0027626\" → Use this tool\n- \"I want to amend CDR0012345\" → Use this tool\n\nContract numbers always start with CDR followed by digits.\n\nDO NOT use for supplier IDs like PC-2025.003552 (use supplier_name_route_partb instead).\nDO NOT use for supplier names like \"Acme Corp\" (use supplier_name_route instead).\n\nPayload:\n{\n  \"data\": {\n    \"contractNumber\": \"<contract_number>\",\n    \"status\": [\"Live\"]\n  }\n}",
                        "type": "tool",
                        "config": {
                            "enabled": true,
                            "toolId": "tool-handoff",
                            "type": "handoff",
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "data": {
                                        "type": "object",
                                        "properties": {
                                            "contractNumber": {
                                                "type": "string"
                                            },
                                            "status": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            }
                                        },
                                        "required": [
                                            "contractNumber",
                                            "status"
                                        ],
                                        "additionalProperties": false
                                    }
                                },
                                "required": [
                                    "data"
                                ],
                                "additionalProperties": false
                            },
                            "settings": {
                                "nodeId": "rdzsag9"
                            },
                            "returnDirect": false,
                            "parameters": {}
                        }
                    },
                    {
                        "_id": "7d095974-62cf-4c70-9645-43e17855e180",
                        "name": "question_1",
                        "description": "question_1 Payload\\n{\\n  \\\"data\\\": {\\n    \\\"agentName\\\": \\\"Contract Amendment Assistant\\\",\\n    \\\"questionKey\\\": \\\"Has the contract amendment been discussed with the supplier? If yes please include a summary of the discussion.\\\"\\n  },\\n  \\\"event\\\": \\\"\\\",\\n  \\\"additionalData\\\": {}\\n}",
                        "type": "tool",
                        "config": {
                            "enabled": true,
                            "toolId": "tool-handoff",
                            "type": "handoff",
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "data": {
                                        "type": "object",
                                        "properties": {
                                            "agentName": {
                                                "type": "string"
                                            },
                                            "questionKey": {
                                                "type": "string"
                                            }
                                        },
                                        "required": [
                                            "agentName",
                                            "questionKey"
                                        ],
                                        "additionalProperties": false
                                    },
                                    "event": {
                                        "type": "string"
                                    },
                                    "additionalData": {
                                        "type": "object",
                                        "properties": {},
                                        "required": [],
                                        "additionalProperties": false
                                    }
                                },
                                "required": [
                                    "data",
                                    "event",
                                    "additionalData"
                                ],
                                "additionalProperties": false
                            },
                            "settings": {
                                "nodeId": "4a61782"
                            },
                            "returnDirect": false,
                            "parameters": {}
                        }
                    },
                    {
                        "_id": "4d845cb4-e5ef-4bc6-9593-08ec50490881",
                        "name": "question_2",
                        "description": "question_2 Payload\\n{\\n  \\\"data\\\": {\\n    \\\"CodeType\\\": \\\"PPST-ReasonForAmendment\\\"\\n  },\\n  \\\"event\\\": \\\"\\\",\\n  \\\"additionalData\\\": {}\\n}",
                        "type": "tool",
                        "config": {
                            "enabled": true,
                            "toolId": "tool-handoff",
                            "type": "handoff",
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "data": {
                                        "type": "object",
                                        "properties": {
                                            "CodeType": {
                                                "type": "string",
                                                "description": "use default value as \"PPST-ReasonForAmendment\""
                                            }
                                        },
                                        "required": [],
                                        "additionalProperties": false
                                    },
                                    "event": {
                                        "type": "string"
                                    },
                                    "additionalData": {
                                        "type": "object",
                                        "properties": {},
                                        "required": [],
                                        "additionalProperties": false
                                    }
                                },
                                "required": [
                                    "data",
                                    "event",
                                    "additionalData"
                                ],
                                "additionalProperties": false
                            },
                            "settings": {
                                "nodeId": "7rvcw8g"
                            },
                            "returnDirect": false,
                            "parameters": {
                                "data.CodeType": "PPST-ReasonForAmendment"
                            }
                        }
                    },
                    {
                        "_id": "560e01dd-61b2-4f58-a877-8f60c3536a03",
                        "name": "question_3",
                        "description": "question_3 Payload\\n{\\n  \\\"data\\\": {\\n    \\\"label_datamodel\\\": \\\"<span>Noted. Please provide brief <strong>description</strong> for the amendment you want to do for the selected contract.</span>\\\"\\n  },\\n  \\\"event\\\": \\\"\\\",\\n  \\\"additionalData\\\": {}\\n}",
                        "type": "tool",
                        "config": {
                            "enabled": true,
                            "toolId": "tool-handoff",
                            "type": "handoff",
                            "schema": {
                                "type": "object",
                                "properties": {},
                                "required": [],
                                "additionalProperties": false
                            },
                            "settings": {
                                "nodeId": "14aiayz"
                            },
                            "returnDirect": false
                        }
                    },
                    {
                        "_id": "180a0aa1-b7e5-4708-a4e5-bee2f2f31a41",
                        "name": "question_4",
                        "description": "question_4 payload\n{\n  \"data\": {\n    \"agentName\": \"Contract Amendment Assistant\",\n    \"questionKey\": \"Got it. Next, are there any changes in the type or volume of data being shared as part of this amendment?\"\n  }\n}\n\n",
                        "type": "tool",
                        "config": {
                            "enabled": true,
                            "toolId": "tool-handoff",
                            "type": "handoff",
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "data": {
                                        "type": "object",
                                        "properties": {
                                            "agentName": {
                                                "type": "string"
                                            },
                                            "questionKey": {
                                                "type": "string"
                                            }
                                        },
                                        "required": [
                                            "agentName",
                                            "questionKey"
                                        ],
                                        "additionalProperties": false
                                    }
                                },
                                "required": [
                                    "data"
                                ],
                                "additionalProperties": false
                            },
                            "settings": {
                                "nodeId": "yfk8qmz"
                            },
                            "returnDirect": false,
                            "parameters": {
                                "btndata.returnInstanceId": true,
                                "btndata.buttons": "[       {         \"label\": \"Yes\",         \"value\": \"1\"       },       {         \"label\": \"No\",         \"value\": \"2\"       }     ]"
                            }
                        }
                    },
                    {
                        "_id": "a509d345-f4dd-46e3-9437-f386d731c4cc",
                        "name": "question_5",
                        "description": "question_5 payload:\n{\n  \"data\": {\n    \"agentName\": \"Contract Amendment Assistant\",\n    \"questionKey\": \"Are there significant changes in products or services offered by the other party or a new scope of work offered by the other party?\"\n  }\n}\n",
                        "type": "tool",
                        "config": {
                            "enabled": true,
                            "toolId": "tool-handoff",
                            "type": "handoff",
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "data": {
                                        "type": "object",
                                        "properties": {
                                            "agentName": {
                                                "type": "string"
                                            },
                                            "questionKey": {
                                                "type": "string"
                                            }
                                        },
                                        "required": [
                                            "agentName",
                                            "questionKey"
                                        ],
                                        "additionalProperties": false
                                    }
                                },
                                "required": [
                                    "data"
                                ],
                                "additionalProperties": false
                            },
                            "settings": {
                                "nodeId": "gwlab79"
                            },
                            "returnDirect": false,
                            "parameters": {
                                "pv_label": "",
                                "btndata.returnInstanceId": true,
                                "btndata.buttons": "[       {         \"label\": \"Yes\",         \"value\": \"1\"       },       {         \"label\": \"No\",         \"value\": \"2\"       }     ]"
                            }
                        }
                    },
                    {
                        "_id": "3e18f0cf-29ec-4c41-880f-b4c801fb5d8e",
                        "name": "summary_node",
                        "description": "---\n\n# **summary_node Payload**\n\nOverride the `label_datamodel` to display:\n\nHere's a quick summary: <br>\n<strong>Contract Number:</strong> <contract_number> <br>\n<strong>Supplier Name:</strong> <supplier_name> <br>\n<strong>Contract Expiry Date:</strong> <contract_expiry_date> <br>\n<strong>Summary of Questions Asked and Answered:</strong> <br>\n- <strong>Discussion with Supplier:</strong> <discussion_with_supplier> <br>\n- <strong>Reason for Amendment:</strong> <amend_reason> <br>\n- <strong>Amendment Description:</strong> <amendment_description> <br>\n- <strong>Amendment Time Sensitivity:</strong> <amend_time_sensitive> <br>\n- <strong>Products / Services Change:</strong> <products_services_change> <br>\n\nPlease confirm if the above details are correct and if you'd like to proceed with the creation of the final project request.\n",
                        "type": "tool",
                        "config": {
                            "enabled": true,
                            "toolId": "tool-handoff",
                            "type": "handoff",
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "label_datamodel": {
                                        "type": "string",
                                        "description": "Override the \"label_datamodel\" to display Contract Number, Supplier Name, Contract Expiry Date for the final selected contract for amendment & summary of all the other questions asked & answered by user in proper textual/html summary format with closing statement asking to confirm final project request creation."
                                    }
                                },
                                "required": [
                                    "label_datamodel"
                                ],
                                "additionalProperties": false
                            },
                            "settings": {
                                "nodeId": "kcsr5n2"
                            },
                            "returnDirect": false,
                            "parameters": {}
                        }
                    },
                    {
                        "_id": "e93bee74-a19a-4726-bc50-1d30b7fbdbce",
                        "name": "project_request_node",
                        "description": "Rule\tDescription\nNull/Empty Strings\tUse \"N/A\" for any null or empty string values\nEmpty Arrays\tUse [] for array fields with no values\nOptional Fields\tOMIT entirely if not applicable — do NOT include with null\nNo Extra Fields\tOnly include fields defined in the schema below\nArrays Must Be Arrays\tNever pass arrays as comma-separated strings\n\nYou must invoke the \"Project_Request_Tool\" attached using the following payload format:\n```json\n\n        \"data\": {\n          \"intake_type\": \"Contract Amendment Intake\",\n          \"generalRequestType\": {\n                  \"name\": \"Contract Amendment\",\n                  \"code\": \"5\"\n          },\n          \"project_description\": \"<generate_description_based_on_conversation_of_amendment>\",\n          \"suppliers\": [\n            {\n              \"sourceIdentificationNumber\":\"<sourceIdentificationNo>\"\n            }],\n          \"discussContractAmend\", <discussionWithSupplier>,\n          \"contractNumber\":<contractNumber>,\n          \"amendReason\": [{ \"name\": \"<reason1>\", \"code\": \"<code1>\"},{ \"name\": \"<reason2>\", \"code\": \"<code2>\"}],\n          \"amendTimeSensitive\": {\"name\":\"<name>\",  \"code\": \"<code>\"},\n          \"amendmentDescription\":\"<amendmentDescription>\",\n          \"amendmentChangeType\": {\"name\":\"<name>\",  \"code\": \"<code>\"},\n          \"amendmentService\": {\"name\":\"<name>\",  \"code\": \"<code>\"},\n           \"contractNumber\": \"<selected_contract_number>\",\n          \"attachmentObjList\": \"<attachments or uploaded files list>\"  // You Must add attachments here from the session context / memory here\n        }\n     ```",
                        "type": "tool",
                        "config": {
                            "enabled": true,
                            "toolId": "tool-handoff",
                            "type": "handoff",
                            "schema": {
                                "type": "object",
                                "required": [
                                    "data"
                                ],
                                "properties": {
                                    "data": {
                                        "type": "object",
                                        "properties": {
                                            "intake_type": {
                                                "type": "string",
                                                "description": "The specific intake channel or type for the request."
                                            },
                                            "generalRequestType": {
                                                "type": "object",
                                                "description": "The classification of the request. For this agent, it is hardcoded to Name: 'Contract Amendment' and Code: '5'.",
                                                "properties": {
                                                    "name": {
                                                        "type": "string"
                                                    },
                                                    "code": {
                                                        "type": "string"
                                                    }
                                                },
                                                "additionalProperties": false
                                            },
                                            "project_description": {
                                                "type": "string",
                                                "description": "A generated summary description of the amendment request derived from the conversation."
                                            },
                                            "suppliers": {
                                                "type": "array",
                                                "items": {
                                                    "type": "object",
                                                    "properties": {
                                                        "sourceIdentificationNumber": {
                                                            "type": "string"
                                                        }
                                                    },
                                                    "additionalProperties": false
                                                }
                                            },
                                            "discussContractAmend": {
                                                "type": "string",
                                                "description": "Indicates whether the contract amendment has already been discussed with the supplier (Question Q2)."
                                            },
                                            "contractNumber": {
                                                "type": "string",
                                                "description": "The unique identifier of the specific contract being amended (Question Q1)."
                                            },
                                            "amendReason": {
                                                "type": "array",
                                                "items": {
                                                    "type": "object",
                                                    "properties": {
                                                        "name": {
                                                            "type": "string"
                                                        },
                                                        "code": {
                                                            "type": "string"
                                                        }
                                                    },
                                                    "additionalProperties": false
                                                }
                                            },
                                            "amendTimeSensitive": {
                                                "type": "object",
                                                "properties": {
                                                    "name": {
                                                        "type": "string"
                                                    },
                                                    "code": {
                                                        "type": "string"
                                                    }
                                                },
                                                "additionalProperties": false
                                            },
                                            "amendmentDescription": {
                                                "type": "string",
                                                "description": "A brief, specific description of the amendment provided by the user (Question Q4)."
                                            },
                                            "amendmentChangeType": {
                                                "type": "object",
                                                "properties": {
                                                    "name": {
                                                        "type": "string"
                                                    },
                                                    "code": {
                                                        "type": "string"
                                                    }
                                                },
                                                "additionalProperties": false
                                            },
                                            "amendmentService": {
                                                "type": "object",
                                                "properties": {
                                                    "name": {
                                                        "type": "string"
                                                    },
                                                    "code": {
                                                        "type": "string"
                                                    }
                                                },
                                                "additionalProperties": false
                                            },
                                            "attachmentObjList": {
                                                "type": "array",
                                                "description": "The list of files uploaded by the user during the session to be attached to the request.",
                                                "items": {
                                                    "type": "object",
                                                    "additionalProperties": true
                                                }
                                            }
                                        },
                                        "additionalProperties": false
                                    }
                                },
                                "additionalProperties": false
                            },
                            "settings": {
                                "nodeId": "f8b0xl2"
                            },
                            "returnDirect": false,
                            "parameters": {}
                        }
                    },
                    {
                        "_id": "93c99a8e-d66b-47c9-844e-e477ad444130",
                        "name": "supplier_name_route",
                        "description": "Use this tool when user provides a supplier NAME or Source Identification Number (starts with PC-.)\n\nExamples:\n- \"amend contract with Acme Corp\" → Use this tool\n- \"I want to amend contract with supplier Workday\" → Use this tool\n- \"amend contract with PC-2025.003552\" → Use this tool -> pass supplierIdentificationNumber: \"PC-2025.003552\"\n\n\nDO NOT use for supplier IDs like PC-2025.003552 (use supplier_name_route_partb instead).\nDO NOT use for contract numbers like CDR0027626 (use contract_name_route instead).\n\nParameters:\n- data.supplierName: Use when user provides a name\n- data.supplierIdentificationNumber: Use when user provides PC-XXXX.XXXXXX format\n- data.status: Always pass [\"Live\"]\n\nPayload:\n{\n  \"data\": {\n    \"supplierName\": \"<extracted_name>\",\n    \"status\": [\"Live\"]\n  }\n}",
                        "type": "tool",
                        "config": {
                            "enabled": true,
                            "toolId": "tool-handoff",
                            "type": "handoff",
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "data": {
                                        "type": "object",
                                        "properties": {
                                            "supplierName": {
                                                "type": "string",
                                                "description": "The supplier name to search for"
                                            },
                                            "supplierIdentificationNumber": {
                                                "type": "string",
                                                "description": "The supplier identification number (use when user provides PC-XXXX.XXXXXX format like PC-2025.003552)"
                                            },
                                            "status": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                },
                                                "description": "Contract status filter. Use [\"Live\"]"
                                            }
                                        },
                                        "required": [],
                                        "additionalProperties": false
                                    }
                                },
                                "required": [
                                    "data"
                                ],
                                "additionalProperties": false
                            },
                            "settings": {
                                "nodeId": "bzglfpi"
                            },
                            "returnDirect": false,
                            "parameters": {}
                        }
                    }
                ],
                "resources": [],
                "maxIterations": 5,
                "includeThoughts": true,
                "streamResponse": true,
                "structuredOutput": {
                    "enable": false,
                    "name": "",
                    "description": "",
                    "schema": {
                        "type": "object",
                        "properties": {
                            "supplierNamedecision": {
                                "type": "string",
                                "description": "This is the identified_supplier_value from user prompt"
                            },
                            "contractNumberDecision": {
                                "type": "string",
                                "description": "This is the identified_contract_value from user prompt to amend the contract"
                            }
                        },
                        "required": [],
                        "additionalProperties": false
                    }
                }
            },
            "data": {},
            "variableUpdates": [
                {
                    "fieldName": "thread.messages",
                    "operation": "append",
                    "value": "{{nodeOutput.text}}",
                    "role": "assistant"
                }
            ],
            "width": 350,
            "height": 225,
            "selected": false,
            "positionAbsolute": {
                "x": -2571.9612279136686,
                "y": -119.09245839544127
            },
            "dragging": false
        },
        {
            "id": "k98iyph",
            "type": "tool",
            "name": "labelandbuttons1",
            "description": "Description:\nThis partial view is responsible for rendering the label and buttons/options.\n\nOutputs:\n- Returns an object containing:\n  - `RenderingId` (string): The unique identifier of the rendered template. Must be used in final response when referencing this template e.g. [partial_view: RenderingId]\n  - `ContentType` (string): Specifies what type of template this is (e.g. `partial_view`).\n  - `Template` (string): A string representing the UI View Template.\n  - `TemplateDescription` (string): A short description of what the template will present to the user.\n\nNotes:\nThis partial view is responsible for rendering the label and buttons/options.",
            "position": {
                "x": -1951.6629721395836,
                "y": 179.7114130915638
            },
            "deletable": true,
            "properties": {
                "retryOnFailure": false,
                "maxRetries": 6,
                "retryInterval": 541,
                "errorHandling": "none",
                "errorObject": {
                    "body": "",
                    "status_code": 500,
                    "headers": {}
                }
            },
            "config": {
                "enabled": true,
                "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913-labelandbuttons-60",
                "type": "mcp",
                "schema": {
                    "type": "object",
                    "properties": {
                        "label_datamodel": {
                            "description": "Description:\n**If data is not a valid html string then convert the value to string.  **Use `label_datamodel` override to pass data to form label.\n\nNotes:\n**If data is not a valid html string then convert the value to string.  **Use `label_datamodel` override to pass data to form label.",
                            "type": "string"
                        },
                        "buttons_datamodel": {
                            "description": "Description:\n\n\nNotes:\n",
                            "type": "string"
                        }
                    },
                    "condition": "Description:\nThis partial view is responsible for rendering the label and buttons/options.\n\nOutputs:\n- Returns an object containing:\n  - `RenderingId` (string): The unique identifier of the rendered template. Must be used in final response when referencing this template e.g. [partial_view: RenderingId]\n  - `ContentType` (string): Specifies what type of template this is (e.g. `partial_view`).\n  - `Template` (string): A string representing the UI View Template.\n  - `TemplateDescription` (string): A short description of what the template will present to the user.\n\nNotes:\nThis partial view is responsible for rendering the label and buttons/options."
                },
                "settings": {
                    "serverId": "572ee3d8-dcd5-4957-8a27-4163f488f913"
                },
                "returnDirect": false,
                "_meta": {
                    "uiView": "{\"RefId\":null,\"ViewUniqueId\":\"e1a380cd-75d0-4534-ac80-aaa5301718ee\",\"Version\":[1,0],\"Type\":\"partialView\",\"Name\":\"label_and_buttons\",\"Icon\":null,\"Channel\":\"conversation\",\"Description\":\"This partial view is responsible for rendering the label and buttons/options.\",\"Instruction\":\"This partial view is responsible for rendering the label and buttons/options.\",\"AppId\":null,\"ModuleId\":null,\"EnableContextSharing\":true,\"Overrides\":{\"label_datamodel\":{\"Type\":\"data\",\"OverrideId\":\"label_datamodel\",\"IsMainDataSource\":null,\"ShareAsContext\":true,\"StoreId\":\"label_datamodel\",\"Description\":\"**If data is not a valid html string then convert the value to string.  **Use \\u0060label_datamodel\\u0060 override to pass data to form label.\",\"Instruction\":\"**If data is not a valid html string then convert the value to string.  **Use \\u0060label_datamodel\\u0060 override to pass data to form label.\",\"Value\":null,\"DataType\":\"string\",\"Source\":\"static\"},\"buttons_datamodel\":{\"Type\":\"data\",\"OverrideId\":\"buttons_datamodel\",\"IsMainDataSource\":null,\"ShareAsContext\":true,\"StoreId\":\"buttons_datamodel\",\"Description\":\"\",\"Instruction\":\"\",\"Value\":null,\"DataType\":\"array\",\"Source\":\"static\"}}}",
                    "type": "partial-view",
                    "source": "current-module",
                    "moduleId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "serverName": "module mcp"
                },
                "parameters": {
                    "label_datamodel": "I have found the {{nodes.getcontractbycontractnumber1.result.data.result[0].contractNumber}} in the system<br> Here's a quick summary: <br> <strong>Contract Number:</strong> {{nodes.getcontractbycontractnumber1.result.data.result[0].contractNumber}} <br> <strong>Contract Name:</strong> {{nodes.getcontractbycontractnumber1.result.data.result[0].contractName}} <br> <strong>Contract Type:</strong> {{nodes.getcontractbycontractnumber1.result.data.result[0].contractType}} <br> <strong>Contract Subtype:</strong> {{nodes.getcontractbycontractnumber1.result.data.result[0].contractSubType}} <br> <strong>Status:</strong> {{nodes.getcontractbycontractnumber1.result.data.result[0].stateName}} <br> <strong>Supplier Name:</strong> {{nodes.getcontractbycontractnumber1.result.data.result[0].supplierName}} <br> <strong>Supplier Partner Code:</strong> {{nodes.getcontractbycontractnumber1.result.data.result[0].supplierSourceIdentificationNo}} <br> <strong>Owner:</strong> {{nodes.getcontractbycontractnumber1.result.data.result[0].owner}} <br> <strong>Effective Date:</strong> {{nodes.getcontractbycontractnumber1.result.data.result[0].effectiveDate}} <br> <strong>Expiry Date:</strong> {{nodes.getcontractbycontractnumber1.result.data.result[0].expiryDate}} <br> <strong>Is Perpetual:</strong> {{nodes.getcontractbycontractnumber1.result.data.result[0].isPerpetual}} <br> <strong>Is Auto Renewal:</strong> {{nodes.getcontractbycontractnumber1.result.data.result[0].isAutoRenew}} <br> Would you like to go ahead with the amendment request?",
                    "buttons_datamodel": "[{\"label\": \"Proceed with Request\",\"value\": \"Proceed with Request\"}]"
                }
            },
            "data": {},
            "width": 350,
            "height": 112,
            "selected": false,
            "positionAbsolute": {
                "x": -1951.6629721395836,
                "y": 179.7114130915638
            },
            "dragging": false,
            "variableUpdates": [
                {
                    "fieldName": "thread.decision_maker_agent_messages",
                    "operation": "append",
                    "value": "\"Contract details have been rendered and waiting for user interaction\"",
                    "role": "tool"
                }
            ]
        },
        {
            "id": "dug9gz2",
            "type": "tool",
            "name": "q2_amendmentreasons",
            "description": "Description:\nHelps render the amendment's primary reasons.\n\nOutputs:\n- Returns an object containing:\n  - `RenderingId` (string): The unique identifier of the rendered template. Must be used in final response when referencing this template e.g. [partial_view: RenderingId]\n  - `ContentType` (string): Specifies what type of template this is (e.g. `partial_view`).\n  - `Template` (string): A string representing the UI View Template.\n  - `TemplateDescription` (string): A short description of what the template will present to the user.\n\nNotes:\nHelps render the amendment's primary reasons.",
            "position": {
                "x": -2356.678782210704,
                "y": 1175.5166952948755
            },
            "deletable": true,
            "properties": {
                "retryOnFailure": false,
                "maxRetries": 6,
                "retryInterval": 541,
                "errorHandling": "none",
                "errorObject": {
                    "body": "",
                    "status_code": 500,
                    "headers": {}
                }
            },
            "config": {
                "enabled": true,
                "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913-amendmentreasons-92",
                "type": "mcp",
                "schema": {
                    "type": "object",
                    "properties": {
                        "multiselectOptions": {
                            "description": "Description:\n\n\nNotes:\n**Use this view override to insert or add options to multiselect. **Data must be a valid list of options/valid json array. **It holds below schema: ``` [ \t{ \t\t\"id\": \"123\", \t\t\"name\": \"option1\" \t}, \t{ \t\t\"id\": \"124\", \t\t\"name\": \"option2\" \t} ] ```",
                            "type": "string"
                        },
                        "multiselect": {
                            "description": "Description:\n\n\nNotes:\n**Use this override to set initial data for the datamodel - \"multiselect\" and value must be a valid json. Value should have array of multiselectObj.  Example value of this override is,   ``` [{ multiselectObj: {} }] ```",
                            "type": "string"
                        },
                        "contextMessageForMultiselect": {
                            "description": "Description:\n\n\nNotes:\n**Set the value of `contextMessageForMultiselect` with `\"Proceed with these selected options\"`.",
                            "type": "string"
                        },
                        "label_multiselect": {
                            "description": "Description:\n\n\nNotes:\n**This datamodel (`label_multiselect` ) will be used to show label on top of multiselect component. Data type will be valid html string.",
                            "type": "string"
                        }
                    },
                    "condition": "Description:\nHelps render the amendment's primary reasons.\n\nOutputs:\n- Returns an object containing:\n  - `RenderingId` (string): The unique identifier of the rendered template. Must be used in final response when referencing this template e.g. [partial_view: RenderingId]\n  - `ContentType` (string): Specifies what type of template this is (e.g. `partial_view`).\n  - `Template` (string): A string representing the UI View Template.\n  - `TemplateDescription` (string): A short description of what the template will present to the user.\n\nNotes:\nHelps render the amendment's primary reasons."
                },
                "settings": {
                    "serverId": "572ee3d8-dcd5-4957-8a27-4163f488f913"
                },
                "returnDirect": false,
                "_meta": {
                    "uiView": "{\"RefId\":null,\"ViewUniqueId\":\"110720e7-29a1-4254-a607-d78b3e2eba30\",\"Version\":[0,0],\"Type\":\"partialView\",\"Name\":\"amendment_reasons\",\"Icon\":null,\"Channel\":\"conversation\",\"Description\":\"Helps render the amendment\\u0027s primary reasons.\",\"Instruction\":\"Helps render the amendment\\u0027s primary reasons.\",\"AppId\":null,\"ModuleId\":null,\"EnableContextSharing\":true,\"Overrides\":{\"multiselectOptions\":{\"Type\":\"view\",\"OverrideId\":\"multiselectOptions\",\"IsMainDataSource\":null,\"ShareAsContext\":null,\"StoreId\":null,\"Description\":\"\",\"Instruction\":\"**Use this view override to insert or add options to multiselect. **Data must be a valid list of options/valid json array. **It holds below schema: \\u0060\\u0060\\u0060 [ \\t{ \\t\\t\\u0022id\\u0022: \\u0022123\\u0022, \\t\\t\\u0022name\\u0022: \\u0022option1\\u0022 \\t}, \\t{ \\t\\t\\u0022id\\u0022: \\u0022124\\u0022, \\t\\t\\u0022name\\u0022: \\u0022option2\\u0022 \\t} ] \\u0060\\u0060\\u0060\",\"Value\":null,\"DataType\":\"array\",\"Source\":\"static\"},\"multiselect\":{\"Type\":\"data\",\"OverrideId\":\"multiselect\",\"IsMainDataSource\":null,\"ShareAsContext\":true,\"StoreId\":\"multiselect\",\"Description\":\"\",\"Instruction\":\"**Use this override to set initial data for the datamodel - \\u0022multiselect\\u0022 and value must be a valid json. Value should have array of multiselectObj.  Example value of this override is,   \\u0060\\u0060\\u0060 [{ multiselectObj: {} }] \\u0060\\u0060\\u0060\",\"Value\":null,\"DataType\":\"array\",\"Source\":\"static\"},\"contextMessageForMultiselect\":{\"Type\":\"data\",\"OverrideId\":\"contextMessageForMultiselect\",\"IsMainDataSource\":null,\"ShareAsContext\":true,\"StoreId\":\"contextMessageForMultiselect\",\"Description\":\"\",\"Instruction\":\"**Set the value of \\u0060contextMessageForMultiselect\\u0060 with \\u0060\\u0022Proceed with these selected options\\u0022\\u0060.\",\"Value\":null,\"DataType\":\"string\",\"Source\":\"static\"},\"label_multiselect\":{\"Type\":\"data\",\"OverrideId\":\"label_multiselect\",\"IsMainDataSource\":null,\"ShareAsContext\":true,\"StoreId\":\"label_multiselect\",\"Description\":\"\",\"Instruction\":\"**This datamodel (\\u0060label_multiselect\\u0060 ) will be used to show label on top of multiselect component. Data type will be valid html string.\",\"Value\":null,\"DataType\":\"string\",\"Source\":\"static\"}}}",
                    "type": "partial-view",
                    "source": "current-module",
                    "moduleId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "serverName": "module mcp"
                },
                "parameters": {
                    "multiselectOptions": "{{nodes.q2_getglobalcode1.result}}",
                    "multiselect": "{\"multiselectObj\": []}",
                    "contextMessageForMultiselect": "Proceed with these selected options",
                    "label_multiselect": "Alright, let's get started. To begin, what's the <strong>primary reason</strong> for amendment?"
                }
            },
            "data": {},
            "width": 350,
            "height": 112,
            "selected": false,
            "positionAbsolute": {
                "x": -2356.678782210704,
                "y": 1175.6588790449725
            },
            "dragging": false,
            "variableUpdates": [
                {
                    "fieldName": "thread.decision_maker_agent_messages",
                    "operation": "append",
                    "value": "\"Question-2 have been asked and waiting for user response\"",
                    "role": "tool"
                }
            ]
        },
        {
            "id": "14aiayz",
            "type": "tool",
            "name": "q3_labelandbuttonslink",
            "description": "Description:\nlabel_and_buttons_link\n\nOutputs:\n- Returns an object containing:\n  - `RenderingId` (string): The unique identifier of the rendered template. Must be used in final response when referencing this template e.g. [partial_view: RenderingId]\n  - `ContentType` (string): Specifies what type of template this is (e.g. `partial_view`).\n  - `Template` (string): A string representing the UI View Template.\n  - `TemplateDescription` (string): A short description of what the template will present to the user.\n\nNotes:\nlabel_and_buttons_link",
            "position": {
                "x": -2788.846979106235,
                "y": 1366.126855236822
            },
            "deletable": true,
            "properties": {
                "retryOnFailure": false,
                "maxRetries": 6,
                "retryInterval": 541,
                "errorHandling": "none",
                "errorObject": {
                    "body": "",
                    "status_code": 500,
                    "headers": {}
                }
            },
            "config": {
                "enabled": true,
                "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913-labelandbuttonslink-96",
                "type": "mcp",
                "schema": {
                    "type": "object",
                    "properties": {
                        "label_datamodel": {
                            "description": "Description:\n\n\nNotes:\n",
                            "type": "string"
                        },
                        "buttons_datamodel": {
                            "description": "Description:\n\n\nNotes:\n",
                            "type": "string"
                        },
                        "infoBannerDetails": {
                            "description": "Description:\n\n\nNotes:\n",
                            "type": "string"
                        }
                    },
                    "condition": "Description:\nlabel_and_buttons_link\n\nOutputs:\n- Returns an object containing:\n  - `RenderingId` (string): The unique identifier of the rendered template. Must be used in final response when referencing this template e.g. [partial_view: RenderingId]\n  - `ContentType` (string): Specifies what type of template this is (e.g. `partial_view`).\n  - `Template` (string): A string representing the UI View Template.\n  - `TemplateDescription` (string): A short description of what the template will present to the user.\n\nNotes:\nlabel_and_buttons_link"
                },
                "settings": {
                    "serverId": "572ee3d8-dcd5-4957-8a27-4163f488f913"
                },
                "returnDirect": false,
                "_meta": {
                    "uiView": "{\"RefId\":null,\"ViewUniqueId\":\"4677dd6a-caa2-4574-b9ad-cd2e97fc01f4\",\"Version\":[0,0],\"Type\":\"partialView\",\"Name\":\"label_and_buttons_link\",\"Icon\":null,\"Channel\":\"conversation\",\"Description\":\"label_and_buttons_link\",\"Instruction\":\"label_and_buttons_link\",\"AppId\":null,\"ModuleId\":null,\"EnableContextSharing\":true,\"Overrides\":{\"label_datamodel\":{\"Type\":\"data\",\"OverrideId\":\"label_datamodel\",\"IsMainDataSource\":null,\"ShareAsContext\":true,\"StoreId\":\"label_datamodel\",\"Description\":\"\",\"Instruction\":\"\",\"Value\":null,\"DataType\":\"string\",\"Source\":\"static\"},\"buttons_datamodel\":{\"Type\":\"data\",\"OverrideId\":\"buttons_datamodel\",\"IsMainDataSource\":null,\"ShareAsContext\":true,\"StoreId\":\"buttons_datamodel\",\"Description\":\"\",\"Instruction\":\"\",\"Value\":null,\"DataType\":\"array\",\"Source\":\"static\"},\"infoBannerDetails\":{\"Type\":\"data\",\"OverrideId\":\"infoBannerDetails\",\"IsMainDataSource\":null,\"ShareAsContext\":true,\"StoreId\":\"infoBannerDetails\",\"Description\":\"\",\"Instruction\":\"\",\"Value\":null,\"DataType\":\"object\",\"Source\":\"static\"}}}",
                    "type": "partial-view",
                    "source": "current-module",
                    "moduleId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "serverName": "module mcp"
                },
                "parameters": {
                    "label_datamodel": "<span>Noted. Please provide brief <strong>description</strong> for the amendment you want to do for the selected contract.</span>",
                    "buttons_datamodel": "",
                    "infoBannerDetails": ""
                }
            },
            "data": {},
            "width": 350,
            "height": 112,
            "selected": false,
            "positionAbsolute": {
                "x": -2789.655131307186,
                "y": 1366.126855236822
            },
            "dragging": false,
            "variableUpdates": [
                {
                    "fieldName": "thread.decision_maker_agent_messages",
                    "operation": "append",
                    "value": "\"Question-3 have been asked and waiting for user response\"",
                    "role": "tool"
                }
            ]
        },
        {
            "id": "gwlab79",
            "type": "tool",
            "name": "q5_getitextmessage2",
            "description": "Description:\n\n\nReturns:\n- \n\nFriendly Name: get_iTextMessage",
            "position": {
                "x": -2816.244864008281,
                "y": 1749.2751540687914
            },
            "deletable": true,
            "properties": {
                "retryOnFailure": false,
                "maxRetries": 6,
                "retryInterval": 541,
                "errorHandling": "none",
                "errorObject": {
                    "body": "",
                    "status_code": 500,
                    "headers": {}
                }
            },
            "config": {
                "enabled": true,
                "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913-getiTextMessage-22",
                "type": "mcp",
                "schema": {
                    "type": "object",
                    "properties": {
                        "event": {
                            "description": "Event to execute DAC policy in server function.",
                            "type": "string"
                        },
                        "data": {
                            "description": "Payload used to execute the function."
                        },
                        "additionalData": {
                            "description": "Any additional data used by the function."
                        }
                    },
                    "required": [
                        "data"
                    ],
                    "condition": "Description:\n\n\nReturns:\n- \n\nFriendly Name: get_iTextMessage"
                },
                "settings": {
                    "serverId": "572ee3d8-dcd5-4957-8a27-4163f488f913"
                },
                "returnDirect": false,
                "_meta": {
                    "functionId": "8481170a-c5e4-450a-89a9-f74a2e86f77d",
                    "type": "ssf-call",
                    "source": "current-module",
                    "moduleId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "serverName": "module mcp"
                },
                "parameters": {
                    "event": "",
                    "data": "{{nodes.decision_maker_agent.toolResults.question_5.data}}",
                    "additionalData": "{}"
                }
            },
            "data": {},
            "width": 331,
            "height": 96,
            "selected": false,
            "positionAbsolute": {
                "x": -2820.3423151160937,
                "y": 1749.2751540687914
            },
            "dragging": false,
            "variableUpdates": [
                {
                    "fieldName": "thread.decision_maker_agent_messages",
                    "operation": "append",
                    "value": "{{nodeOutput.result}}",
                    "role": "tool"
                }
            ]
        },
        {
            "id": "dwwrlg5",
            "type": "tool",
            "name": "q5_dummylabelbuttonstest",
            "description": "Description:\n\n\nReturns:\n- \n\nFriendly Name: dummy_label_buttons_test",
            "position": {
                "x": -2344.111970143027,
                "y": 1749.2751540687914
            },
            "deletable": true,
            "properties": {
                "retryOnFailure": false,
                "maxRetries": 6,
                "retryInterval": 541,
                "errorHandling": "none",
                "errorObject": {
                    "body": "",
                    "status_code": 500,
                    "headers": {}
                }
            },
            "config": {
                "enabled": true,
                "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913-dummylabelbuttonstest-2",
                "type": "mcp",
                "schema": {
                    "type": "object",
                    "properties": {
                        "event": {
                            "description": "Event to execute DAC policy in server function.",
                            "type": "string"
                        },
                        "data": {
                            "description": "Payload used to execute the function."
                        },
                        "additionalData": {
                            "description": "Any additional data used by the function."
                        }
                    },
                    "required": [
                        "data"
                    ],
                    "condition": "Description:\n\n\nReturns:\n- \n\nFriendly Name: dummy_label_buttons_test"
                },
                "settings": {
                    "serverId": "572ee3d8-dcd5-4957-8a27-4163f488f913"
                },
                "returnDirect": false,
                "_meta": {
                    "functionId": "45a05b40-9ccf-44a6-bcad-08c03f8df7d7",
                    "type": "ssf-call",
                    "source": "current-module",
                    "moduleId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "serverName": "module mcp"
                },
                "parameters": {
                    "event": "",
                    "data": "{     \"returnInstanceId\": true,     \"buttons\": [       {         \"label\": \"Yes\",         \"value\": \"1\"       },       {         \"label\": \"No\",         \"value\": \"2\"       }     ]   }",
                    "additionalData": "{}"
                }
            },
            "data": {},
            "width": 350,
            "height": 112,
            "selected": false,
            "positionAbsolute": {
                "x": -2340.482353312421,
                "y": 1749.2751540687914
            },
            "dragging": false,
            "variableUpdates": [
                {
                    "fieldName": "thread.decision_maker_agent_messages",
                    "operation": "append",
                    "value": "{{nodeOutput.result}}",
                    "role": "tool"
                }
            ]
        },
        {
            "id": "qm881xn",
            "type": "tool",
            "name": "q5_labelandbuttonslink2",
            "description": "Description:\nlabel_and_buttons_link\n\nOutputs:\n- Returns an object containing:\n  - `RenderingId` (string): The unique identifier of the rendered template. Must be used in final response when referencing this template e.g. [partial_view: RenderingId]\n  - `ContentType` (string): Specifies what type of template this is (e.g. `partial_view`).\n  - `Template` (string): A string representing the UI View Template.\n  - `TemplateDescription` (string): A short description of what the template will present to the user.\n\nNotes:\nlabel_and_buttons_link",
            "position": {
                "x": -1858.4028622727228,
                "y": 1758.2160749970758
            },
            "deletable": true,
            "properties": {
                "retryOnFailure": false,
                "maxRetries": 6,
                "retryInterval": 541,
                "errorHandling": "none",
                "errorObject": {
                    "body": "",
                    "status_code": 500,
                    "headers": {}
                }
            },
            "config": {
                "enabled": true,
                "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913-labelandbuttonslink-96",
                "type": "mcp",
                "schema": {
                    "type": "object",
                    "properties": {
                        "label_datamodel": {
                            "description": "Description:\n\n\nNotes:\n",
                            "type": "string"
                        },
                        "buttons_datamodel": {
                            "description": "Description:\n\n\nNotes:\n",
                            "type": "string"
                        },
                        "infoBannerDetails": {
                            "description": "Description:\n\n\nNotes:\n",
                            "type": "string"
                        }
                    },
                    "condition": "Description:\nlabel_and_buttons_link\n\nOutputs:\n- Returns an object containing:\n  - `RenderingId` (string): The unique identifier of the rendered template. Must be used in final response when referencing this template e.g. [partial_view: RenderingId]\n  - `ContentType` (string): Specifies what type of template this is (e.g. `partial_view`).\n  - `Template` (string): A string representing the UI View Template.\n  - `TemplateDescription` (string): A short description of what the template will present to the user.\n\nNotes:\nlabel_and_buttons_link"
                },
                "settings": {
                    "serverId": "572ee3d8-dcd5-4957-8a27-4163f488f913"
                },
                "returnDirect": false,
                "_meta": {
                    "uiView": "{\"RefId\":null,\"ViewUniqueId\":\"4677dd6a-caa2-4574-b9ad-cd2e97fc01f4\",\"Version\":[0,0],\"Type\":\"partialView\",\"Name\":\"label_and_buttons_link\",\"Icon\":null,\"Channel\":\"conversation\",\"Description\":\"label_and_buttons_link\",\"Instruction\":\"label_and_buttons_link\",\"AppId\":null,\"ModuleId\":null,\"EnableContextSharing\":true,\"Overrides\":{\"label_datamodel\":{\"Type\":\"data\",\"OverrideId\":\"label_datamodel\",\"IsMainDataSource\":null,\"ShareAsContext\":true,\"StoreId\":\"label_datamodel\",\"Description\":\"\",\"Instruction\":\"\",\"Value\":null,\"DataType\":\"string\",\"Source\":\"static\"},\"buttons_datamodel\":{\"Type\":\"data\",\"OverrideId\":\"buttons_datamodel\",\"IsMainDataSource\":null,\"ShareAsContext\":true,\"StoreId\":\"buttons_datamodel\",\"Description\":\"\",\"Instruction\":\"\",\"Value\":null,\"DataType\":\"array\",\"Source\":\"static\"},\"infoBannerDetails\":{\"Type\":\"data\",\"OverrideId\":\"infoBannerDetails\",\"IsMainDataSource\":null,\"ShareAsContext\":true,\"StoreId\":\"infoBannerDetails\",\"Description\":\"\",\"Instruction\":\"\",\"Value\":null,\"DataType\":\"object\",\"Source\":\"static\"}}}",
                    "type": "partial-view",
                    "source": "current-module",
                    "moduleId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "serverName": "module mcp"
                },
                "parameters": {
                    "label_datamodel": "Understood. Are there <strong>significant changes in products or Services</strong> offered by the other party?",
                    "buttons_datamodel": "{{nodes.q5_dummylabelbuttonstest.result.result}}",
                    "infoBannerDetails": "{{nodes.q5_getitextmessage2.result}}"
                }
            },
            "data": {},
            "width": 350,
            "height": 112,
            "selected": false,
            "positionAbsolute": {
                "x": -1858.4028622727228,
                "y": 1755.3588615214164
            },
            "dragging": false,
            "variableUpdates": [
                {
                    "fieldName": "thread.decision_maker_agent_messages",
                    "operation": "append",
                    "value": "\"Question-5 have been asked and waiting for user response\"",
                    "role": "tool"
                }
            ]
        },
        {
            "id": "note_j2rr3el",
            "type": "note",
            "name": "note_0",
            "description": "Canvas note",
            "position": {
                "x": -4091.392881303092,
                "y": -398.2794604237872
            },
            "deletable": true,
            "style": {
                "minWidth": 300,
                "minHeight": 200
            },
            "data": {
                "content": [
                    {
                        "type": "paragraph",
                        "children": [
                            {
                                "text": "I want to amend the contract  CDR0028258.0"
                            }
                        ]
                    },
                    {
                        "type": "paragraph",
                        "children": [
                            {
                                "text": " "
                            }
                        ]
                    },
                    {
                        "type": "paragraph",
                        "children": [
                            {
                                "text": "Proceed With request"
                            }
                        ]
                    },
                    {
                        "type": "paragraph",
                        "children": [
                            {
                                "text": " "
                            }
                        ]
                    },
                    {
                        "type": "paragraph",
                        "children": [
                            {
                                "text": "<FAQ Qestionare>"
                            }
                        ]
                    },
                    {
                        "type": "paragraph",
                        "children": [
                            {
                                "text": "yes it was discussed accordingly"
                            }
                        ]
                    },
                    {
                        "type": "paragraph",
                        "children": [
                            {
                                "text": " "
                            }
                        ]
                    },
                    {
                        "type": "paragraph",
                        "children": [
                            {
                                "text": "Proceed : with these options \"Addition of new locations or regions, Addition or removal of parties\""
                            }
                        ]
                    },
                    {
                        "type": "paragraph",
                        "children": [
                            {
                                "text": " "
                            }
                        ]
                    },
                    {
                        "type": "paragraph",
                        "children": [
                            {
                                "text": "this is all the brief description that is needed for my new location, for it i wish to remove few parts"
                            }
                        ]
                    },
                    {
                        "type": "paragraph",
                        "children": [
                            {
                                "text": "- alternate: Description: This is the final description"
                            }
                        ]
                    },
                    {
                        "type": "paragraph",
                        "children": [
                            {
                                "text": " "
                            }
                        ]
                    },
                    {
                        "type": "paragraph",
                        "children": [
                            {
                                "text": "Yes"
                            }
                        ]
                    },
                    {
                        "type": "paragraph",
                        "children": [
                            {
                                "text": " r"
                            }
                        ]
                    },
                    {
                        "type": "paragraph",
                        "children": [
                            {
                                "text": "Yes"
                            }
                        ]
                    }
                ],
                "color": "Yellow"
            },
            "properties": {},
            "config": {},
            "width": 719,
            "height": 386,
            "selected": false,
            "dragging": false,
            "positionAbsolute": {
                "x": -4091.392881303092,
                "y": -398.2794604237872
            }
        },
        {
            "id": "bzglfpi",
            "type": "tool",
            "name": "getcontractbysuppliername",
            "description": "Description:\n\n\nReturns:\n- \n\nFriendly Name: Get_Contract_By_Supplier_Name",
            "position": {
                "x": -2298.048610899192,
                "y": 369.3793046353966
            },
            "deletable": true,
            "properties": {
                "retryOnFailure": false,
                "maxRetries": 6,
                "retryInterval": 541,
                "errorHandling": "none",
                "errorObject": {
                    "body": "",
                    "status_code": 500,
                    "headers": {}
                }
            },
            "config": {
                "enabled": true,
                "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913-GetContractBySupplierName-36",
                "type": "mcp",
                "schema": {
                    "type": "object",
                    "properties": {
                        "event": {
                            "description": "Event to execute DAC policy in server function.",
                            "type": "string"
                        },
                        "data": {
                            "type": "string",
                            "description": "Payload used to execute the function."
                        },
                        "additionalData": {
                            "type": "string",
                            "description": "Any additional data used by the function."
                        }
                    },
                    "required": [
                        "data"
                    ],
                    "condition": "Description:\n\n\nReturns:\n- \n\nFriendly Name: Get_Contract_By_Supplier_Name"
                },
                "settings": {
                    "serverId": "572ee3d8-dcd5-4957-8a27-4163f488f913"
                },
                "returnDirect": false,
                "_meta": {
                    "functionId": "221f4e08-7a43-452a-9e50-d15d1eb056dd",
                    "type": "ssf-call",
                    "source": "current-module",
                    "moduleId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "serverName": "module mcp"
                },
                "parameters": {
                    "event": "\"\"",
                    "data": "{{nodes.decision_maker_agent.toolResults.supplier_name_route.data}}",
                    "additionalData": "{}"
                }
            },
            "data": {},
            "width": 350,
            "height": 112,
            "selected": false,
            "positionAbsolute": {
                "x": -2300.788564336398,
                "y": 369.3793046353966
            },
            "dragging": false,
            "variableUpdates": [
                {
                    "fieldName": "flow.lastSSF",
                    "operation": "set",
                    "value": "getContractBySupplierName"
                },
                {
                    "fieldName": "thread.decision_maker_agent_messages",
                    "operation": "append",
                    "value": "{{nodeOutput.result}}",
                    "role": "tool"
                }
            ]
        },
        {
            "id": "yfwx7wz",
            "type": "tool",
            "name": "suppliergridv1",
            "description": "Description:\nThis tool is for rendering suppliers in grid in case of multiple suppliers found in our records.\n\nOutputs:\n- Returns an object containing:\n  - `RenderingId` (string): The unique identifier of the rendered template. Must be used in final response when referencing this template e.g. [partial_view: RenderingId]\n  - `ContentType` (string): Specifies what type of template this is (e.g. `partial_view`).\n  - `Template` (string): A string representing the UI View Template.\n  - `TemplateDescription` (string): A short description of what the template will present to the user.\n\nNotes:\nThis tool is for rendering suppliers in grid in case of multiple suppliers found in our records.",
            "position": {
                "x": -1183.9915012841493,
                "y": 472.75598062030315
            },
            "deletable": true,
            "properties": {
                "retryOnFailure": false,
                "maxRetries": 6,
                "retryInterval": 541,
                "errorHandling": "none",
                "errorObject": {
                    "body": "",
                    "status_code": 500,
                    "headers": {}
                }
            },
            "config": {
                "enabled": true,
                "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913-SupplierGridV1-66",
                "type": "mcp",
                "schema": {
                    "type": "object",
                    "properties": {
                        "preText": {
                            "description": "Text message to be rendered before the content of the partial view",
                            "type": "string"
                        },
                        "postText": {
                            "description": "Text message to be rendered after the content of the partial view",
                            "type": "string"
                        },
                        "gridData": {
                            "description": "Description:\n\n\nNotes:\n",
                            "type": "string"
                        },
                        "supplierGrid_msg": {
                            "description": "Description:\nUse this override to set data for label. Type of data is html string and overrideid is \"supplierGrid_msg\".\n\nNotes:\nUse this override to set data for label. Type of data is html string and overrideid is \"supplierGrid_msg\".",
                            "type": "string"
                        }
                    },
                    "condition": "Description:\nThis tool is for rendering suppliers in grid in case of multiple suppliers found in our records.\n\nOutputs:\n- Returns an object containing:\n  - `RenderingId` (string): The unique identifier of the rendered template. Must be used in final response when referencing this template e.g. [partial_view: RenderingId]\n  - `ContentType` (string): Specifies what type of template this is (e.g. `partial_view`).\n  - `Template` (string): A string representing the UI View Template.\n  - `TemplateDescription` (string): A short description of what the template will present to the user.\n\nNotes:\nThis tool is for rendering suppliers in grid in case of multiple suppliers found in our records."
                },
                "settings": {
                    "serverId": "572ee3d8-dcd5-4957-8a27-4163f488f913"
                },
                "returnDirect": false,
                "_meta": {
                    "uiView": "{\"RefId\":null,\"ViewUniqueId\":\"62e1e08f-92c0-4016-aa55-706cbbf77a44\",\"Version\":[0,0],\"Type\":\"partialView\",\"Name\":\"SupplierGridV1\",\"Icon\":null,\"Channel\":\"conversation\",\"Description\":\"This tool is for rendering suppliers in grid in case of multiple suppliers found in our records.\",\"Instruction\":\"This tool is for rendering suppliers in grid in case of multiple suppliers found in our records.\",\"AppId\":null,\"ModuleId\":null,\"EnableContextSharing\":true,\"Overrides\":{\"gridData\":{\"Type\":\"data\",\"OverrideId\":\"gridData\",\"IsMainDataSource\":null,\"ShareAsContext\":true,\"StoreId\":\"gridData\",\"Description\":\"\",\"Instruction\":\"\",\"Value\":null,\"DataType\":\"array\",\"Source\":\"static\"},\"supplierGrid_msg\":{\"Type\":\"data\",\"OverrideId\":\"supplierGrid_msg\",\"IsMainDataSource\":null,\"ShareAsContext\":true,\"StoreId\":\"supplierGrid_msg\",\"Description\":\"Use this override to set data for label. Type of data is html string and overrideid is \\u0022supplierGrid_msg\\u0022.\",\"Instruction\":\"Use this override to set data for label. Type of data is html string and overrideid is \\u0022supplierGrid_msg\\u0022.\",\"Value\":null,\"DataType\":\"string\",\"Source\":\"static\"}}}",
                    "type": "partial-view",
                    "source": "current-module",
                    "moduleId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "serverName": "module mcp"
                },
                "parameters": {
                    "preText": "",
                    "postText": "",
                    "gridData": "{{nodes.getcontractbysuppliername.result.data.suppliers}}",
                    "supplierGrid_msg": "I found multiple suppliers in our records with similar names. Please select a supplier from the list below to confirm."
                }
            },
            "data": {},
            "width": 350,
            "height": 112,
            "selected": false,
            "positionAbsolute": {
                "x": -1183.9915012841493,
                "y": 472.75598062030315
            },
            "dragging": false,
            "variableUpdates": [
                {
                    "fieldName": "flow.isMultipleSupplier",
                    "operation": "set",
                    "value": true
                },
                {
                    "fieldName": "thread.decision_maker_agent_messages",
                    "operation": "append",
                    "value": "Completed step 1B-multiple, multiple supplier rendered and waiting for user interaction",
                    "role": "tool"
                }
            ]
        },
        {
            "id": "pu2nblm",
            "type": "rule",
            "name": "check_single_or_multiple_suppliers",
            "description": "",
            "position": {
                "x": -1723.8917778801738,
                "y": 326.69272129977116
            },
            "deletable": true,
            "properties": {
                "retryOnFailure": false,
                "maxRetries": 6,
                "retryInterval": 541,
                "errorHandling": "none",
                "errorObject": {
                    "body": "",
                    "status_code": 500,
                    "headers": {}
                }
            },
            "config": {
                "rules": [
                    {
                        "ruleId": "r-ndgx6330",
                        "enable": true,
                        "conditions": [
                            {
                                "field": "{{nodes.getcontractbysuppliername.result.data.suppliers}}",
                                "operator": "is empty",
                                "value": ""
                            }
                        ],
                        "logicType": "AND"
                    },
                    {
                        "ruleId": "r-else",
                        "enable": true,
                        "conditions": [],
                        "logicType": "default"
                    }
                ]
            },
            "data": {},
            "width": 350,
            "height": 170,
            "selected": false,
            "positionAbsolute": {
                "x": -1723.8917778801738,
                "y": 327.80955242807323
            },
            "dragging": false
        },
        {
            "id": "r6ai0e4",
            "type": "tool",
            "name": "getcontracts_1",
            "description": "Description:\n\n\nReturns:\n- \n\nFriendly Name: Get_Contracts",
            "position": {
                "x": -828.0627981139233,
                "y": 275.8399788789583
            },
            "deletable": true,
            "properties": {
                "retryOnFailure": false,
                "maxRetries": 6,
                "retryInterval": 541,
                "errorHandling": "none",
                "errorObject": {
                    "body": "",
                    "status_code": 500,
                    "headers": {}
                }
            },
            "config": {
                "enabled": true,
                "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913-GetContracts-18",
                "type": "mcp",
                "schema": {
                    "type": "object",
                    "properties": {
                        "event": {
                            "description": "Event to execute DAC policy in server function.",
                            "type": "string"
                        },
                        "data": {
                            "type": "string",
                            "description": "Payload used to execute the function."
                        },
                        "additionalData": {
                            "type": "string",
                            "description": "Any additional data used by the function."
                        }
                    },
                    "required": [
                        "data"
                    ],
                    "condition": "Description:\n\n\nReturns:\n- \n\nFriendly Name: Get_Contracts"
                },
                "settings": {
                    "serverId": "572ee3d8-dcd5-4957-8a27-4163f488f913"
                },
                "returnDirect": false,
                "_meta": {
                    "functionId": "dfd1a652-2c33-48c9-8a13-2cfe7c9a74ee",
                    "type": "ssf-call",
                    "source": "current-module",
                    "moduleId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "serverName": "module mcp"
                },
                "parameters": {
                    "event": "\"\"",
                    "data": "{{nodes.llm_0.structuredOutput}}",
                    "additionalData": "{}"
                }
            },
            "data": {},
            "width": 312,
            "height": 96,
            "selected": false,
            "positionAbsolute": {
                "x": -828.0627981139233,
                "y": 277.74251253797866
            },
            "dragging": false,
            "variableUpdates": [
                {
                    "fieldName": "flow.lastSSF",
                    "operation": "set",
                    "value": "getContracts"
                },
                {
                    "fieldName": "thread.decision_maker_agent_messages",
                    "operation": "append",
                    "value": "{{nodeOutput.result}}",
                    "role": "tool"
                }
            ]
        },
        {
            "id": "16g5mib",
            "type": "tool",
            "name": "contractgrid1_1",
            "description": "Description:\nThis view shows available contracts in grid format.\n\nOutputs:\n- Returns an object containing:\n  - `RenderingId` (string): The unique identifier of the rendered template. Must be used in final response when referencing this template e.g. [partial_view: RenderingId]\n  - `ContentType` (string): Specifies what type of template this is (e.g. `partial_view`).\n  - `Template` (string): A string representing the UI View Template.\n  - `TemplateDescription` (string): A short description of what the template will present to the user.\n\nNotes:\nThis view shows available contracts in grid format.",
            "position": {
                "x": -44.967438442908275,
                "y": 326.69272129977116
            },
            "deletable": true,
            "properties": {
                "retryOnFailure": false,
                "maxRetries": 6,
                "retryInterval": 541,
                "errorHandling": "none",
                "errorObject": {
                    "body": "",
                    "status_code": 500,
                    "headers": {}
                }
            },
            "config": {
                "enabled": true,
                "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913-contractgrid-68",
                "type": "mcp",
                "schema": {
                    "type": "object",
                    "properties": {
                        "preText": {
                            "description": "Text message to be rendered before the content of the partial view",
                            "type": "string"
                        },
                        "postText": {
                            "description": "Text message to be rendered after the content of the partial view",
                            "type": "string"
                        },
                        "gridData": {
                            "description": "Description:\n\n\nNotes:\ngridData is a json object having a single property `gridRows`, and this gridRows contains list of contracts.",
                            "type": "string"
                        },
                        "contract_grid_label": {
                            "description": "Description:\n\n\nNotes:\n",
                            "type": "string"
                        },
                        "contract_grid_buttons_datamodel": {
                            "description": "Description:\n\n\nNotes:\n**This data override will be type of array of objects. Where each object referes to a button object. This override help to overrideId - 'contract_grid_buttons_datamodel'. **Always override a valid json object to datamodel.  **It holds below schema -    ``` [ \t{ \t\t\"label\": \"Create New Contract\", \t\t\"value\": \"Create New Contract\" \t}, \t{ \t\t\"label\": \"Amend Selected Contract\", \t\t\"value\": \"Amend Selected Contract\", \t\t\"dataModelForSelection\": [ \t\t\t{ \t\t\t\t\"dataModelId\": \"selectedGridRows\", \t\t\t\t\"dataPath\": \"contract_grid.0.contractNumber\" \t\t\t} \t\t], \t\t\"dataModelForContext\": [ \t\t\t{ \t\t\t\t\"dataModelId\": \"selectedGridRows\", \t\t\t\t\"dataPath\": \"contract_grid.0\" \t\t\t} \t\t] \t} ] ```",
                            "type": "string"
                        }
                    },
                    "condition": "Description:\nThis view shows available contracts in grid format.\n\nOutputs:\n- Returns an object containing:\n  - `RenderingId` (string): The unique identifier of the rendered template. Must be used in final response when referencing this template e.g. [partial_view: RenderingId]\n  - `ContentType` (string): Specifies what type of template this is (e.g. `partial_view`).\n  - `Template` (string): A string representing the UI View Template.\n  - `TemplateDescription` (string): A short description of what the template will present to the user.\n\nNotes:\nThis view shows available contracts in grid format."
                },
                "settings": {
                    "serverId": "572ee3d8-dcd5-4957-8a27-4163f488f913"
                },
                "returnDirect": false,
                "_meta": {
                    "uiView": "{\"RefId\":null,\"ViewUniqueId\":\"779d507a-cae1-425c-85a5-c6bcea429125\",\"Version\":[0,0],\"Type\":\"partialView\",\"Name\":\"contract_grid\",\"Icon\":null,\"Channel\":\"conversation\",\"Description\":\"This view shows available contracts in grid format.\",\"Instruction\":\"This view shows available contracts in grid format.\",\"AppId\":null,\"ModuleId\":null,\"EnableContextSharing\":true,\"Overrides\":{\"gridData\":{\"Type\":\"data\",\"OverrideId\":\"gridData\",\"IsMainDataSource\":null,\"ShareAsContext\":true,\"StoreId\":\"gridData\",\"Description\":\"\",\"Instruction\":\"gridData is a json object having a single property \\u0060gridRows\\u0060, and this gridRows contains list of contracts.\",\"Value\":null,\"DataType\":\"object\",\"Source\":\"static\"},\"contract_grid_label\":{\"Type\":\"data\",\"OverrideId\":\"contract_grid_label\",\"IsMainDataSource\":null,\"ShareAsContext\":true,\"StoreId\":\"contract_grid_label\",\"Description\":\"\",\"Instruction\":\"\",\"Value\":null,\"DataType\":\"string\",\"Source\":\"static\"},\"contract_grid_buttons_datamodel\":{\"Type\":\"data\",\"OverrideId\":\"contract_grid_buttons_datamodel\",\"IsMainDataSource\":null,\"ShareAsContext\":true,\"StoreId\":\"contract_grid_buttons_datamodel\",\"Description\":\"\",\"Instruction\":\"**This data override will be type of array of objects. Where each object referes to a button object. This override help to overrideId - \\u0027contract_grid_buttons_datamodel\\u0027. **Always override a valid json object to datamodel.  **It holds below schema -    \\u0060\\u0060\\u0060 [ \\t{ \\t\\t\\u0022label\\u0022: \\u0022Create New Contract\\u0022, \\t\\t\\u0022value\\u0022: \\u0022Create New Contract\\u0022 \\t}, \\t{ \\t\\t\\u0022label\\u0022: \\u0022Amend Selected Contract\\u0022, \\t\\t\\u0022value\\u0022: \\u0022Amend Selected Contract\\u0022, \\t\\t\\u0022dataModelForSelection\\u0022: [ \\t\\t\\t{ \\t\\t\\t\\t\\u0022dataModelId\\u0022: \\u0022selectedGridRows\\u0022, \\t\\t\\t\\t\\u0022dataPath\\u0022: \\u0022contract_grid.0.contractNumber\\u0022 \\t\\t\\t} \\t\\t], \\t\\t\\u0022dataModelForContext\\u0022: [ \\t\\t\\t{ \\t\\t\\t\\t\\u0022dataModelId\\u0022: \\u0022selectedGridRows\\u0022, \\t\\t\\t\\t\\u0022dataPath\\u0022: \\u0022contract_grid.0\\u0022 \\t\\t\\t} \\t\\t] \\t} ] \\u0060\\u0060\\u0060\",\"Value\":null,\"DataType\":\"array\",\"Source\":\"static\"}}}",
                    "type": "partial-view",
                    "source": "current-module",
                    "moduleId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "toolId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
                    "serverName": "module mcp"
                },
                "parameters": {
                    "preText": "",
                    "postText": "",
                    "gridData": "{{nodes.llm_1.structuredOutput.gridData}}",
                    "contract_grid_label": "I found {{flow.supplierDetails.supplierName}} in our records. <br> Here's a quick summary: <br> <strong>Supplier Legal Name:</strong> {{flow.supplierDetails.supplierName}} <br> <strong>Supplier Source Identification No:</strong> {{flow.supplierDetails.supplierSourceIdentificationNo}} <br> <strong>Supplier Partner Number:</strong> {{flow.supplierDetails.partnerCode}} <br> <strong>Supplier Partner Status:</strong> {{flow.supplierDetails.partnerStatus}} <br> <strong>Supplier Onboarding Status:</strong> {{flow.supplierDetails.onboardingStatus}} <br> The following contracts are associated with {{flow.supplierDetails.supplierSourceIdentificationNo}}. Kindly select the contract you wish to amend.",
                    "contract_grid_buttons_datamodel": " [{           \"label\": \"Amend Selected Contract\",           \"value\": \"Amend Selected Contract\",           \"dataModelForSelection\": [{             \"dataModelId\": \"selectedGridRows\",             \"dataPath\": \"contract_grid.0.contractNumber\"           }],           \"dataModelForContext\": [{             \"dataModelId\": \"selectedGridRows\",             \"dataPath\": \"contract_grid.0\"           }],           \"validation\": [{             \"validationType\": \"emptyDataModel\",             \"validationMessage\": \"Please select contract to continue.\",             \"values\": [{               \"dataModelId\": \"selectedGridRows\",               \"dataPath\": \"contract_grid.0.contractNumber\"             }]           }]         }]"
                }
            },
            "data": {},
            "width": 350,
            "height": 112,
            "selected": false,
            "positionAbsolute": {
                "x": -44.967438442908275,
                "y": 326.69272129977116
            },
            "dragging": false,
            "variableUpdates": [
                {
                    "fieldName": "flow.isSingleContract",
                    "operation": "set",
                    "value": false
                },
                {
                    "fieldName": "thread.decision_maker_agent_messages",
                    "operation": "append",
                    "value": "Completed step 1C-supplier-contracts, contract grid rendered and waiting for user interaction",
                    "role": "tool"
                }
            ]
        },
        {
            "id": "6yaq8og",
            "type": "llm",
            "name": "llm_0",
            "description": "",
            "position": {
                "x": -1175.636653469072,
                "y": 271.8399788789583
            },
            "deletable": true,
            "properties": {
                "retryOnFailure": false,
                "maxRetries": 6,
                "retryInterval": 541,
                "errorHandling": "none",
                "errorObject": {
                    "body": "",
                    "status_code": 500,
                    "headers": {}
                }
            },
            "config": {
                "model": {
                    "code": "gpt-4.1",
                    "name": "OpenAI GPT-4.1"
                },
                "promptTemplate": [
                    {
                        "id": "cefde83f-3401-4363-b143-22acde9641e6",
                        "role": "system",
                        "text": "---\n\n### Variable Definitions\n\n```\nsuppliersList = {{nodes.getcontractbysuppliername.result.suppliers}}\n\nprimarySourceIdentificationNo = {{nodes.getcontractbysuppliername.result.suppliers.gridRows[0].sourceIdentificationNo}}\nprimarySupplierName = {{nodes.getcontractbysuppliername.result.suppliers.gridRows[0].legalCompanyName}}\nprimaryPartnerCode = {{nodes.getcontractbysuppliername.result.suppliers.gridRows[0].partnerCode}}\nprimaryPartnerStatus = {{nodes.getcontractbysuppliername.result.suppliers.gridRows[0].partnerStatus}}\nprimaryOnboardingStatus = {{nodes.getcontractbysuppliername.result.suppliers.gridRows[0].onboardingStatus}}\n\nfallbackSourceIdentificationNo = {{nodes.decision_maker_agent.toolResults.supplier_name_route_partb.data.supplierSourceIdentificationNo}}\nfallbackSupplierName = {{nodes.decision_maker_agent.toolResults.supplier_name_route_partb.data.supplierName}}\nfallbackPartnerCode = {{nodes.decision_maker_agent.toolResults.supplier_name_route_partb.data.partnerCode}}\nfallbackPartnerStatus = {{nodes.decision_maker_agent.toolResults.supplier_name_route_partb.data.partnerStatus}}\nfallbackOnboardingStatus = {{nodes.decision_maker_agent.toolResults.supplier_name_route_partb.data.onboardingStatus}}\n```\n\n---\n\n### Conditional Output Logic\n\n* **If `suppliersList` is NOT NULL:**\n  Output **ONLY** the following JSON:\n\n```\n{\n  \"supplierSourceIdentificationNo\": primarySourceIdentificationNo,\n  \"supplierName\": primarySupplierName,\n  \"partnerCode\": primaryPartnerCode,\n  \"partnerStatus\": primaryPartnerStatus,\n  \"onboardingStatus\": primaryOnboardingStatus,\n  \"status\": [\"Live\"]\n}\n```\n\n* **If `suppliersList` is NULL:**\n  Output **ONLY** the following JSON:\n\n```\n{\n  \"supplierSourceIdentificationNo\": fallbackSourceIdentificationNo,\n  \"supplierName\": fallbackSupplierName,\n  \"partnerCode\": fallbackPartnerCode,\n  \"partnerStatus\": fallbackPartnerStatus,\n  \"onboardingStatus\": fallbackOnboardingStatus,\n  \"status\": [\"Live\"]\n}\n```\n\n---\n\n### Instructions\n\n* Do not produce any text, messages, or formatting outside of the specified JSON outputs above.\n* Follow the conditional logic exactly as stated.\n\n"
                    },
                    {
                        "id": "c6ba9c6c-adfe-4198-99f1-e24c3c70505f",
                        "role": "user",
                        "text": "User Query: {{system.userQuery}}"
                    }
                ],
                "structuredOutput": {
                    "enable": true,
                    "name": "",
                    "description": "",
                    "schema": {
                        "type": "object",
                        "properties": {
                            "supplierSourceIdentificationNo": {
                                "type": "string",
                                "description": "Unique source identification number of the supplier"
                            },
                            "supplierName": {
                                "type": "string",
                                "description": "Legal name of the supplier"
                            },
                            "partnerCode": {
                                "type": "string",
                                "description": "Unique partner code associated with the supplier"
                            },
                            "partnerStatus": {
                                "type": "string",
                                "description": "Current status of the partner"
                            },
                            "onboardingStatus": {
                                "type": "string",
                                "description": "Current onboarding status of the supplier"
                            },
                            "status": {
                                "type": "array",
                                "items": {
                                    "type": "string",
                                    "enum": [
                                        "Live"
                                    ]
                                },
                                "description": "Status of the supplier or contract"
                            }
                        },
                        "required": [
                            "supplierSourceIdentificationNo",
                            "supplierName",
                            "partnerCode",
                            "partnerStatus",
                            "onboardingStatus",
                            "status"
                        ],
                        "additionalProperties": false
                    }
                }
            },
            "data": {},
            "variableUpdates": [
                {
                    "fieldName": "flow.supplierDetails",
                    "operation": "set",
                    "value": "{{nodeOutput.structuredOutput}}"
                }
            ],
            "width": 250,
            "height": 104,
            "selected": false,
            "positionAbsolute": {
                "x": -1175.636653469072,
                "y": 271.8399788789583
            },
            "dragging": false
        },
        {
            "id": "glmfuw1",
            "type": "variable",
            "name": "variable_0",
            "description": "",
            "position": {
                "x": -880.287332984509,
                "y": 925.5457238053942
            },
            "deletable": true,
            "properties": {
                "retryOnFailure": false,
                "maxRetries": 6,
                "retryInterval": 541,
                "errorHandling": "none",
                "errorObject": {
                    "body": "",
                    "status_code": 500,
                    "headers": {}
                }
            },
            "config": {},
            "data": {},
            "width": 250,
            "height": 72,
            "selected": false,
            "positionAbsolute": {
                "x": -880.287332984509,
                "y": 926.4134800340946
            },
            "dragging": false,
            "variableUpdates": [
                {
                    "fieldName": "flow.isPvRendered",
                    "operation": "set",
                    "value": true
                },
                {
                    "fieldName": "thread.messages",
                    "operation": "append",
                    "value": " ",
                    "role": "assistant"
                }
            ]
        },
        {
            "id": "4n6qofr",
            "type": "output",
            "name": "output_6",
            "description": "",
            "position": {
                "x": -1075.636653469072,
                "y": -41.09245839544126
            },
            "deletable": true,
            "properties": {
                "retryOnFailure": false,
                "maxRetries": 6,
                "retryInterval": 541,
                "errorHandling": "none",
                "errorObject": {
                    "body": "",
                    "status_code": 500,
                    "headers": {}
                }
            },
            "config": {
                "outputMapping": {
                    "messages": {
                        "type": "string",
                        "value": "{{thread.messages}}"
                    },
                    "selectedAgentID": {
                        "type": "string",
                        "value": "{{runtime.workflowMetaData.workflowId}}"
                    },
                    "selectedAgentName": {
                        "type": "string",
                        "value": "{{runtime.workflowMetaData.agentName}}"
                    },
                    "isPvRendered": {
                        "type": "string",
                        "value": "{{flow.isPvRendered}}"
                    },
                    "agentName": {
                        "type": "string",
                        "value": "{{flow.agentName}}"
                    },
                    "text": {
                        "type": "string",
                        "value": "{{nodes.decision_maker_agent.text}}"
                    }
                }
            },
            "data": {},
            "width": 150,
            "height": 72,
            "selected": false,
            "positionAbsolute": {
                "x": -1075.5961031956551,
                "y": -41.09245839544126
            },
            "dragging": false
        },
        {
            "id": "bt3cvr0",
            "type": "llm",
            "name": "llm_1",
            "description": "",
            "position": {
                "x": -388.27964051273375,
                "y": 293.2089838135661
            },
            "deletable": true,
            "properties": {
                "retryOnFailure": false,
                "maxRetries": 6,
                "retryInterval": 541,
                "errorHandling": "none",
                "errorObject": {
                    "body": "",
                    "status_code": 500,
                    "headers": {}
                }
            },
            "config": {
                "model": {
                    "code": "gpt-4.1",
                    "name": "OpenAI GPT-4.1"
                },
                "promptTemplate": [
                    {
                        "id": "90da8238-e118-472f-a0d0-d1e03f36f752",
                        "role": "system",
                        "text": "Developer: Output the following contract data in the specified JSON structure.\n\n'''\ncontractData_type_1 = {{nodes.getcontracts_1.result.text}}\n'''\n\nReturn the result as a single JSON object with this structure:\n\n{\n  \"gridData\": {\n    \"gridRows\": [<array of contract objects from contractData_type_1 list>]\n  }\n}\n\nRequirements:\n- \"gridData\" must be an object containing only a \"gridRows\" property.\n- \"gridRows\" must be an array populated with all contracts from contractData_type_1.\n- Do not include any additional properties at any level.\n- Keys and data types in \"gridRows\" must match exactly those in contractData_type_1.\n- Output must strictly match the JSON object structure above."
                    }
                ],
                "structuredOutput": {
                    "enable": true,
                    "name": "",
                    "description": "",
                    "schema": {
                        "type": "object",
                        "properties": {
                            "gridData": {
                                "type": "object",
                                "properties": {
                                    "gridRows": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "properties": {},
                                            "required": [],
                                            "additionalProperties": false
                                        }
                                    }
                                },
                                "required": [
                                    "gridRows"
                                ],
                                "additionalProperties": false,
                                "description": "gridData"
                            }
                        },
                        "required": [
                            "gridData"
                        ],
                        "additionalProperties": false
                    }
                }
            },
            "data": {},
            "width": 250,
            "height": 104,
            "selected": false,
            "positionAbsolute": {
                "x": -388.27964051273375,
                "y": 293.2089838135661
            },
            "dragging": false
        },
        {
            "id": "ngh8kxf",
            "type": "tool",
            "name": "prfsentforvalidationsuccesspv0021",
            "description": "Description:\nShow this PV on success of send for validation.\n\nNotes:\nShow this PV on success of send for validation.",
            "position": {
                "x": -2817.244864008281,
                "y": 2390.768873413807
            },
            "deletable": true,
            "properties": {
                "retryOnFailure": false,
                "maxRetries": 6,
                "retryInterval": 541,
                "errorHandling": "none",
                "errorObject": {
                    "body": "",
                    "status_code": 500,
                    "headers": {}
                }
            },
            "config": {
                "enabled": true,
                "toolId": "mcp-62e995f8-9aed-4aab-9621-45c817019856-prfsentForValidationSuccesspv0021",
                "type": "mcp",
                "schema": {
                    "type": "object",
                    "properties": {
                        "preText": {
                            "description": "Optional Markdown shown immediately before this view. Use to introduce what it shows/why it matters or give brief instructions. Omit if unnecessary. Must be valid Markdown; UI preserves formatting and spacing.",
                            "type": "string"
                        },
                        "postText": {
                            "description": "Optional Markdown shown immediately after this view. Use for next steps, brief context/interpretation, or a transition to the next section/view. Omit if unnecessary. Must be valid Markdown; UI preserves formatting and spacing.",
                            "type": "string"
                        },
                        "sendForValidationOverrides": {
                            "description": "Description:\nUse agent history and set the value to ovverride 'sendForValidationOverrides' from '${sendForValidationPV}' \n\nNotes:\nUse agent history and set the value to ovverride 'sendForValidationOverrides' from '${sendForValidationPV}' ",
                            "type": "string"
                        }
                    },
                    "condition": "Description:\nShow this PV on success of send for validation.\n\nNotes:\nShow this PV on success of send for validation."
                },
                "settings": {
                    "serverId": "62e995f8-9aed-4aab-9621-45c817019856"
                },
                "returnDirect": false,
                "_meta": {
                    "uiView": "{\"RefId\":null,\"ViewUniqueId\":\"56a8778a-e705-4a1b-acf9-2eafd3029cae\",\"Version\":[0,0],\"Type\":\"partialSection\",\"Name\":\"prf_sentForValidationSuccess_pv-0.0.21\",\"Icon\":null,\"Channel\":\"conversation\",\"Description\":\"Show this PV on success of send for validation.\",\"Instruction\":\"Show this PV on success of send for validation.\",\"AppId\":null,\"ModuleId\":null,\"EnableContextSharing\":true,\"Overrides\":{\"sendForValidationOverrides\":{\"Type\":\"data\",\"OverrideId\":\"sendForValidationOverrides\",\"IsMainDataSource\":null,\"ShareAsContext\":true,\"StoreId\":\"projectrequest\",\"Description\":\"Use agent history and set the value to ovverride \\u0027sendForValidationOverrides\\u0027 from \\u0027${sendForValidationPV}\\u0027 \",\"Instruction\":\"Use agent history and set the value to ovverride \\u0027sendForValidationOverrides\\u0027 from \\u0027${sendForValidationPV}\\u0027 \",\"Value\":null,\"DataType\":\"object\",\"Source\":\"static\"}}}",
                    "type": "partial-view"
                },
                "parameters": {
                    "preText": "",
                    "postText": "",
                    "sendForValidationOverrides": "{{flow.pv_data}}"
                }
            },
            "data": {},
            "width": 350,
            "height": 112,
            "selected": true,
            "positionAbsolute": {
                "x": -2817.0796752902047,
                "y": 2390.768873413807
            },
            "dragging": false,
            "variableUpdates": [
                {
                    "fieldName": "flow.isPvRendered",
                    "operation": "set",
                    "value": true
                },
                {
                    "fieldName": "thread.decision_maker_agent_messages",
                    "operation": "append",
                    "value": "wait for user interaction",
                    "role": "tool"
                },
                {
                    "fieldName": "thread.messages",
                    "operation": "append",
                    "value": " ",
                    "role": "assistant"
                }
            ]
        },
        {
            "id": "t10uxwp",
            "type": "rule",
            "name": "rule_0",
            "description": "",
            "position": {
                "x": -2377.7240912975567,
                "y": 648.1001328786932
            },
            "deletable": true,
            "properties": {
                "retryOnFailure": false,
                "maxRetries": 6,
                "retryInterval": 541,
                "errorHandling": "none",
                "errorObject": {
                    "body": "",
                    "status_code": 500,
                    "headers": {}
                }
            },
            "config": {
                "rules": [
                    {
                        "ruleId": "r-5fff3lh7",
                        "enable": true,
                        "conditions": [
                            {
                                "field": "{{nodes.llm_2.structuredOutput.routeTo}}",
                                "operator": "equals",
                                "value": "getContractByContractNumber"
                            }
                        ],
                        "logicType": "AND"
                    },
                    {
                        "ruleId": "r-hk39f4my",
                        "enable": true,
                        "conditions": [
                            {
                                "field": "{{nodes.llm_2.structuredOutput.routeTo}}",
                                "operator": "equals",
                                "value": "getContractBySupplierName"
                            }
                        ],
                        "logicType": "AND"
                    },
                    {
                        "ruleId": "r-5kg88v78",
                        "enable": true,
                        "conditions": [
                            {
                                "field": "{{nodes.llm_2.structuredOutput.routeTo}}",
                                "operator": "equals",
                                "value": "getContracts"
                            }
                        ],
                        "logicType": "AND"
                    },
                    {
                        "ruleId": "r-else",
                        "enable": true,
                        "conditions": [],
                        "logicType": "default"
                    }
                ]
            },
            "data": {},
            "width": 272,
            "height": 260,
            "selected": false,
            "positionAbsolute": {
                "x": -2373.0144779682587,
                "y": 648.1001328786932
            },
            "dragging": false
        },
        {
            "id": "ypr3gpd",
            "type": "llm",
            "name": "llm_2",
            "description": "",
            "position": {
                "x": -2799.278741286638,
                "y": 726.1001328786932
            },
            "deletable": true,
            "properties": {
                "retryOnFailure": false,
                "maxRetries": 6,
                "retryInterval": 541,
                "errorHandling": "none",
                "errorObject": {
                    "body": "",
                    "status_code": 500,
                    "headers": {}
                }
            },
            "config": {
                "model": {
                    "code": "gpt-4.1",
                    "name": "OpenAI GPT-4.1"
                },
                "promptTemplate": [
                    {
                        "id": "c3527735-cf27-4c1a-8a6d-289372980fd4",
                        "role": "system",
                        "text": "# Agent Routing Instructions\n\n## Purpose\nRoute based on detecting invalid tool responses using case-specific patterns only.\n\n---\n\n## Context Variables\n\n```\nlastSSF = {{flow.lastSSF}}\ngetContractByContractNumberOutput = {{nodes.getcontractbycontractnumber1.result}}\ngetContractBySupplierNameOutput = {{nodes.getcontractbysuppliername.result}}\ngetContractsOutput = {{nodes.getcontracts_1.result}}\n```\n\n---\n\n## Core Principles\n\n1. Tool responses are the single source of truth\n2. Detect INVALID data using exact pattern matching only\n3. If INVALID → route to supervisor\n4. If NOT INVALID → route based on lastSSF\n\n---\n\n## Routing Logic\n\n### Case 1: lastSSF == \"getContractByContractNumber\"\n\n**Check:** `getContractByContractNumberOutput`\n\n**Invalid Pattern:**\n```json\n{\n  \"data\": {\n    \"result\": [],\n    \"error\": \"No contract found which is in following states: Live\"\n  }\n}\n```\n\n**Decision:**\n- If output matches invalid pattern → route to `supervisor`\n- Otherwise → route to `getContractByContractNumber`\n\n---\n\n### Case 2: lastSSF == \"getContractBySupplierName\"\n\n**Check:** `getContractBySupplierNameOutput`\n\n**Invalid Pattern:**\n```json\n{\n  \"data\": {\n    \"result\": \"No matching supplier\"\n  }\n}\n```\n\n**Decision:**\n- If output matches invalid pattern → route to `supervisor`\n- Otherwise → route to `getContractBySupplierName`\n\n---\n\n### Case 3: lastSSF == \"getContracts\"\n\n**Check:** `getContractsOutput`\n\n**Invalid Pattern:**\n```json\n{\n  \"text\": []\n}\n```\n\n**Decision:**\n- If output matches invalid pattern → route to `supervisor`\n- Otherwise → route to `getContracts`\n\n---\n\n## Fallback Rule\n\nRoute to `supervisor` if:\n- lastSSF does not match any known case\n- Expected output variable is missing or null\n- Cannot confidently determine validity\n\n---\n\n## Output Format\n\nOutput exactly ONE line with no explanation:\n\n```\nrouteTo: getContractByContractNumber\nrouteTo: getContractBySupplierName\nrouteTo: getContracts\nrouteTo: supervisor\n```"
                    }
                ],
                "structuredOutput": {
                    "enable": true,
                    "name": "",
                    "description": "",
                    "schema": {
                        "type": "object",
                        "properties": {
                            "routeTo": {
                                "type": "string",
                                "enum": [
                                    "getContractByContractNumber",
                                    "getContractBySupplierName",
                                    "getContracts",
                                    "supervisor"
                                ]
                            }
                        },
                        "required": [
                            "routeTo"
                        ],
                        "additionalProperties": false
                    }
                }
            },
            "data": {},
            "variableUpdates": [
                {
                    "fieldName": "thread.messages",
                    "operation": "append",
                    "value": "{{nodeOutput.text}}",
                    "role": "assistant"
                }
            ],
            "width": 250,
            "height": 104,
            "selected": false,
            "positionAbsolute": {
                "x": -2799.278741286638,
                "y": 725.5240637941196
            },
            "dragging": false
        }
    ],
    "edges": [
        {
            "id": "reactflow__edge-4a61782-9wblgkw",
            "source": "4a61782",
            "target": "9wblgkw",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": null,
            "targetHandle": null,
            "data": {
                "sourceType": "tool",
                "targetType": "tool"
            },
            "selected": false
        },
        {
            "id": "reactflow__edge-yfk8qmz-gqu7rqp",
            "source": "yfk8qmz",
            "target": "gqu7rqp",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": null,
            "targetHandle": null,
            "data": {
                "sourceType": "tool",
                "targetType": "tool"
            },
            "selected": false
        },
        {
            "id": "reactflow__edge-gqu7rqp-z8ocd8c",
            "source": "gqu7rqp",
            "target": "z8ocd8c",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": null,
            "targetHandle": null,
            "data": {
                "sourceType": "tool",
                "targetType": "tool"
            },
            "selected": false
        },
        {
            "id": "reactflow__edge-f8b0xl2-x6miusi",
            "source": "f8b0xl2",
            "target": "x6miusi",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": null,
            "targetHandle": null,
            "data": {
                "sourceType": "tool",
                "targetType": "tool"
            },
            "selected": false
        },
        {
            "id": "5ee933r-handoff-4d845cb4-e5ef-4bc6-9593-08ec50490881",
            "source": "5ee933r",
            "target": "7rvcw8g",
            "type": "handoff",
            "sourceHandle": "handoff",
            "targetHandle": null,
            "deletable": false,
            "data": {
                "toolId": "4d845cb4-e5ef-4bc6-9593-08ec50490881",
                "isHandoff": true,
                "sourceType": "agent",
                "targetType": "tool"
            },
            "selected": false
        },
        {
            "id": "5ee933r-handoff-7d095974-62cf-4c70-9645-43e17855e180",
            "source": "5ee933r",
            "target": "4a61782",
            "type": "handoff",
            "sourceHandle": "handoff",
            "targetHandle": null,
            "deletable": false,
            "data": {
                "toolId": "7d095974-62cf-4c70-9645-43e17855e180",
                "isHandoff": true,
                "sourceType": "agent",
                "targetType": "tool"
            },
            "selected": false
        },
        {
            "id": "5ee933r-handoff-3e18f0cf-29ec-4c41-880f-b4c801fb5d8e",
            "source": "5ee933r",
            "target": "kcsr5n2",
            "type": "handoff",
            "sourceHandle": "handoff",
            "targetHandle": null,
            "deletable": false,
            "data": {
                "toolId": "3e18f0cf-29ec-4c41-880f-b4c801fb5d8e",
                "isHandoff": true,
                "sourceType": "agent",
                "targetType": "tool"
            },
            "selected": false
        },
        {
            "id": "5ee933r-handoff-180a0aa1-b7e5-4708-a4e5-bee2f2f31a41",
            "source": "5ee933r",
            "target": "yfk8qmz",
            "type": "handoff",
            "sourceHandle": "handoff",
            "targetHandle": null,
            "deletable": false,
            "data": {
                "toolId": "180a0aa1-b7e5-4708-a4e5-bee2f2f31a41",
                "isHandoff": true,
                "sourceType": "agent",
                "targetType": "tool"
            },
            "selected": false
        },
        {
            "id": "5ee933r-handoff-e93bee74-a19a-4726-bc50-1d30b7fbdbce",
            "source": "5ee933r",
            "target": "f8b0xl2",
            "type": "handoff",
            "sourceHandle": "handoff",
            "targetHandle": null,
            "deletable": false,
            "data": {
                "toolId": "e93bee74-a19a-4726-bc50-1d30b7fbdbce",
                "isHandoff": true,
                "sourceType": "agent",
                "targetType": "tool"
            },
            "selected": false
        },
        {
            "id": "reactflow__edge-7rvcw8g-dug9gz2",
            "source": "7rvcw8g",
            "target": "dug9gz2",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": null,
            "targetHandle": null,
            "data": {
                "sourceType": "tool",
                "targetType": "tool"
            },
            "selected": false
        },
        {
            "id": "5ee933r-handoff-560e01dd-61b2-4f58-a877-8f60c3536a03",
            "source": "5ee933r",
            "target": "14aiayz",
            "type": "handoff",
            "sourceHandle": "handoff",
            "targetHandle": null,
            "deletable": false,
            "data": {
                "toolId": "560e01dd-61b2-4f58-a877-8f60c3536a03",
                "isHandoff": true,
                "sourceType": "agent",
                "targetType": "tool"
            },
            "selected": false
        },
        {
            "id": "reactflow__edge-start-5ee933r",
            "source": "start",
            "target": "5ee933r",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": null,
            "targetHandle": null,
            "data": {
                "sourceType": "start",
                "targetType": "agent"
            },
            "selected": false
        },
        {
            "id": "reactflow__edge-gwlab79-dwwrlg5",
            "source": "gwlab79",
            "target": "dwwrlg5",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": null,
            "targetHandle": null,
            "data": {
                "sourceType": "tool",
                "targetType": "tool"
            },
            "selected": false
        },
        {
            "id": "reactflow__edge-dwwrlg5-qm881xn",
            "source": "dwwrlg5",
            "target": "qm881xn",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": null,
            "targetHandle": null,
            "data": {
                "sourceType": "tool",
                "targetType": "tool"
            },
            "selected": false
        },
        {
            "id": "5ee933r-handoff-a509d345-f4dd-46e3-9437-f386d731c4cc",
            "source": "5ee933r",
            "target": "gwlab79",
            "type": "handoff",
            "sourceHandle": "handoff",
            "targetHandle": null,
            "deletable": false,
            "data": {
                "toolId": "a509d345-f4dd-46e3-9437-f386d731c4cc",
                "isHandoff": true,
                "sourceType": "agent",
                "targetType": "tool"
            }
        },
        {
            "id": "5ee933r-handoff-46094187-4153-4e59-8816-60ad367bba4a",
            "source": "5ee933r",
            "target": "rdzsag9",
            "type": "handoff",
            "sourceHandle": "handoff",
            "targetHandle": null,
            "deletable": false,
            "data": {
                "toolId": "46094187-4153-4e59-8816-60ad367bba4a",
                "isHandoff": true,
                "sourceType": "agent",
                "targetType": "tool"
            }
        },
        {
            "id": "reactflow__edge-pu2nblmr-else-yfwx7wz",
            "source": "pu2nblm",
            "target": "yfwx7wz",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": "r-else",
            "targetHandle": null,
            "data": {
                "sourceType": "rule",
                "targetType": "tool"
            },
            "selected": false
        },
        {
            "id": "5ee933r-handoff-93c99a8e-d66b-47c9-844e-e477ad444130",
            "source": "5ee933r",
            "target": "bzglfpi",
            "type": "handoff",
            "sourceHandle": "handoff",
            "targetHandle": null,
            "deletable": false,
            "data": {
                "toolId": "93c99a8e-d66b-47c9-844e-e477ad444130",
                "isHandoff": true,
                "sourceType": "agent",
                "targetType": "tool"
            },
            "selected": false
        },
        {
            "id": "reactflow__edge-pu2nblmr-ndgx6330-6yaq8og",
            "source": "pu2nblm",
            "target": "6yaq8og",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": "r-ndgx6330",
            "targetHandle": null,
            "data": {
                "sourceType": "rule",
                "targetType": "llm"
            },
            "selected": false
        },
        {
            "id": "reactflow__edge-6yaq8og-r6ai0e4",
            "source": "6yaq8og",
            "target": "r6ai0e4",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": null,
            "targetHandle": null,
            "data": {
                "sourceType": "llm",
                "targetType": "tool"
            },
            "selected": false
        },
        {
            "id": "5ee933r-handoff-b47f72b3-4de4-4285-b6fe-1081a894ceb4",
            "source": "5ee933r",
            "target": "6yaq8og",
            "type": "handoff",
            "sourceHandle": "handoff",
            "targetHandle": null,
            "deletable": false,
            "data": {
                "toolId": "b47f72b3-4de4-4285-b6fe-1081a894ceb4",
                "isHandoff": true,
                "sourceType": "agent",
                "targetType": "llm"
            },
            "selected": false
        },
        {
            "id": "reactflow__edge-glmfuw1-4n6qofr",
            "source": "glmfuw1",
            "target": "4n6qofr",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": null,
            "targetHandle": null,
            "data": {
                "sourceType": "variable",
                "targetType": "output"
            }
        },
        {
            "id": "reactflow__edge-9wblgkw-glmfuw1",
            "source": "9wblgkw",
            "target": "glmfuw1",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": null,
            "targetHandle": null,
            "data": {
                "sourceType": "tool",
                "targetType": "variable"
            }
        },
        {
            "id": "reactflow__edge-dug9gz2-glmfuw1",
            "source": "dug9gz2",
            "target": "glmfuw1",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": null,
            "targetHandle": null,
            "data": {
                "sourceType": "tool",
                "targetType": "variable"
            }
        },
        {
            "id": "reactflow__edge-14aiayz-glmfuw1",
            "source": "14aiayz",
            "target": "glmfuw1",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": null,
            "targetHandle": null,
            "data": {
                "sourceType": "tool",
                "targetType": "variable"
            }
        },
        {
            "id": "reactflow__edge-z8ocd8c-glmfuw1",
            "source": "z8ocd8c",
            "target": "glmfuw1",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": null,
            "targetHandle": null,
            "data": {
                "sourceType": "tool",
                "targetType": "variable"
            }
        },
        {
            "id": "reactflow__edge-qm881xn-glmfuw1",
            "source": "qm881xn",
            "target": "glmfuw1",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": null,
            "targetHandle": null,
            "data": {
                "sourceType": "tool",
                "targetType": "variable"
            }
        },
        {
            "id": "reactflow__edge-kcsr5n2-glmfuw1",
            "source": "kcsr5n2",
            "target": "glmfuw1",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": null,
            "targetHandle": null,
            "data": {
                "sourceType": "tool",
                "targetType": "variable"
            }
        },
        {
            "id": "reactflow__edge-x6miusi-glmfuw1",
            "source": "x6miusi",
            "target": "glmfuw1",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": null,
            "targetHandle": null,
            "data": {
                "sourceType": "tool",
                "targetType": "variable"
            }
        },
        {
            "id": "reactflow__edge-yfwx7wz-glmfuw1",
            "source": "yfwx7wz",
            "target": "glmfuw1",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": null,
            "targetHandle": null,
            "data": {
                "sourceType": "tool",
                "targetType": "variable"
            },
            "selected": false
        },
        {
            "id": "reactflow__edge-16g5mib-glmfuw1",
            "source": "16g5mib",
            "target": "glmfuw1",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": null,
            "targetHandle": null,
            "data": {
                "sourceType": "tool",
                "targetType": "variable"
            },
            "selected": false
        },
        {
            "id": "reactflow__edge-k98iyph-glmfuw1",
            "source": "k98iyph",
            "target": "glmfuw1",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": null,
            "targetHandle": null,
            "data": {
                "sourceType": "tool",
                "targetType": "variable"
            },
            "selected": false
        },
        {
            "id": "reactflow__edge-bt3cvr0-16g5mib",
            "source": "bt3cvr0",
            "target": "16g5mib",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": null,
            "targetHandle": null,
            "data": {
                "sourceType": "llm",
                "targetType": "tool"
            },
            "selected": false
        },
        {
            "id": "5ee933r-handoff-b10fcae7-e918-4f2a-ac86-75f684d27640",
            "source": "5ee933r",
            "target": "ngh8kxf",
            "type": "handoff",
            "sourceHandle": "handoff",
            "targetHandle": null,
            "deletable": false,
            "data": {
                "toolId": "b10fcae7-e918-4f2a-ac86-75f684d27640",
                "isHandoff": true,
                "sourceType": "agent",
                "targetType": "tool"
            }
        },
        {
            "id": "reactflow__edge-ngh8kxf-glmfuw1",
            "source": "ngh8kxf",
            "target": "glmfuw1",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": null,
            "targetHandle": null,
            "data": {
                "sourceType": "tool",
                "targetType": "variable"
            }
        },
        {
            "id": "reactflow__edge-t10uxwpr-5fff3lh7-k98iyph",
            "source": "t10uxwp",
            "target": "k98iyph",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": "r-5fff3lh7",
            "targetHandle": null,
            "data": {
                "sourceType": "rule",
                "targetType": "tool"
            }
        },
        {
            "id": "reactflow__edge-t10uxwpr-hk39f4my-pu2nblm",
            "source": "t10uxwp",
            "target": "pu2nblm",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": "r-hk39f4my",
            "targetHandle": null,
            "data": {
                "sourceType": "rule",
                "targetType": "rule"
            }
        },
        {
            "id": "reactflow__edge-t10uxwpr-5kg88v78-bt3cvr0",
            "source": "t10uxwp",
            "target": "bt3cvr0",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": "r-5kg88v78",
            "targetHandle": null,
            "data": {
                "sourceType": "rule",
                "targetType": "llm"
            }
        },
        {
            "id": "reactflow__edge-t10uxwpr-else-5ee933r",
            "source": "t10uxwp",
            "target": "5ee933r",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": "r-else",
            "targetHandle": null,
            "data": {
                "sourceType": "rule",
                "targetType": "agent"
            }
        },
        {
            "id": "reactflow__edge-rdzsag9-ypr3gpd",
            "source": "rdzsag9",
            "target": "ypr3gpd",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": null,
            "targetHandle": null,
            "data": {
                "sourceType": "tool",
                "targetType": "llm"
            }
        },
        {
            "id": "reactflow__edge-ypr3gpd-t10uxwp",
            "source": "ypr3gpd",
            "target": "t10uxwp",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": null,
            "targetHandle": null,
            "data": {
                "sourceType": "llm",
                "targetType": "rule"
            }
        },
        {
            "id": "reactflow__edge-bzglfpi-ypr3gpd",
            "source": "bzglfpi",
            "target": "ypr3gpd",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": null,
            "targetHandle": null,
            "data": {
                "sourceType": "tool",
                "targetType": "llm"
            }
        },
        {
            "id": "reactflow__edge-r6ai0e4-ypr3gpd",
            "source": "r6ai0e4",
            "target": "ypr3gpd",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": null,
            "targetHandle": null,
            "data": {
                "sourceType": "tool",
                "targetType": "llm"
            }
        },
        {
            "id": "reactflow__edge-5ee933r-4n6qofr",
            "source": "5ee933r",
            "target": "4n6qofr",
            "style": {
                "strokeWidth": 3
            },
            "sourceHandle": null,
            "targetHandle": null,
            "data": {
                "sourceType": "agent",
                "targetType": "output"
            }
        }
    ],
    "variables": {
        "flow": [
            {
                "id": "var-bjcoyf8p5",
                "name": "all_que_ans",
                "type": "boolean",
                "default": false,
                "required": false
            },
            {
                "id": "var-85iswqwmc",
                "name": "pv_data",
                "type": "string",
                "default": "",
                "required": false
            },
            {
                "id": "var-isoo6diq4",
                "name": "iTextMessage",
                "type": "string",
                "default": "",
                "required": false
            },
            {
                "id": "var-5lipetigi",
                "name": "isMultipleSupplier",
                "type": "string",
                "default": "",
                "required": false
            },
            {
                "id": "var-mg99uo2ar",
                "name": "isSingleContract",
                "type": "string",
                "default": "",
                "required": false
            },
            {
                "id": "var-5tuf63trw",
                "name": "agentName",
                "type": "string",
                "default": "contract_amendment_assistant",
                "required": false
            },
            {
                "id": "var-2jky1c5s8",
                "name": "isPvRendered",
                "type": "string",
                "default": "false",
                "required": false
            },
            {
                "id": "var-ke7n4mcej",
                "name": "supplierDetails",
                "type": "object",
                "default": {},
                "required": false
            },
            {
                "id": "var-y6wx4q2qj",
                "name": "lastSSF",
                "type": "string",
                "default": "",
                "required": false
            }
        ],
        "system": []
    },
    "interface": {
        "inputs": {
            "query": {
                "type": "string",
                "description": "User query to process",
                "required": true
            }
        },
        "outputs": {
            "response": {
                "type": "string",
                "description": "Final response to the user"
            }
        }
    },
    "security": {
        "activities": [
            {
                "refId": "10100002",
                "code": "10100002",
                "name": "Home"
            },
            {
                "refId": "11300009",
                "code": "11300009",
                "name": "Projects - Create project request"
            },
            {
                "refId": "1032000004",
                "code": "1032000004",
                "name": "GEP Qi - Create Request"
            }
        ]
    },
    "publishChannels": [
        {
            "refId": "api",
            "code": "api",
            "name": "API",
            "description": "Expose the agent as a REST API for system and app integrations"
        },
        {
            "refId": "qi-ui",
            "code": "qi-ui",
            "name": "Qi UI",
            "description": "Make your agent available in GEP’s Qi interface"
        }
    ],
    "skills": [],
    "createdBy": "Amol.Kurhade@gep.com",
    "createdOn": "2026-02-05T17:54:11.266Z",
    "updatedBy": "Amol.Kurhade@gep.com",
    "updatedOn": "2026-02-05T17:54:11.266Z",
    "environment": "DEV",
    "appId": "98bed795-a280-4672-86ad-d13fa7aa83a9",
    "moduleId": "572ee3d8-dcd5-4957-8a27-4163f488f913",
    "version": "v1770346099216925400"
}